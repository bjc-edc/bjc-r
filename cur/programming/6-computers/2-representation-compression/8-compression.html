<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 6 Lab 2: Data Representation and Compression, Page 8</title>
	</head>

	<body>
		<h2>Data Compression</h2>
		<div class="todo">
            <p>EK 2.2.3K Lower-level abstractions can be combined to make higher level abstractions, such as short message services (SMS) or email messages, images, audio files, and videos. </p>
            <p>
                EK 3.3.1B Security concerns engender tradeoffs in storing and transmitting information.<br />
                EK 3.3.1C There are trade offs in using lossy and lossless compression techniques for storing and transmitting data.<br />
                EK 3.3.1D Lossless data compression reduces the number of bits stored or transmitted but allows complete reconstruction of the original data<br />
                EK 3.3.1E Lossy data compression can significantly reduce the number of bits stored or transmitted at the cost of being able to reconstruct only an approximation of the original data.<br />
                EK 3.3.1F Security and privacy concerns arise with data containing personal information.<br />
            </p>
        </div>
        
		<!---<p>Beyond just representing color, there are also many ways (file formats like BMP, PNG, GIF, and JPG or JPEG) to store the picture information in long-term memory.  These formats differ in compression (more on that below) and in how the computer finds the <em>dimensions</em> of the picture (width and height, in pixels). And the application also has to know how to put the picture up on the actual screen. So application programmers use <em>graphics libraries</em> to take care of these details.</p> --->

        <div class="comment"><a href="http://localhost/bjc-r/cur/programming/6-computers/old/1-hierarchy/2-storage.html" target="_blank">Mary's old version with some content she wants to discuss before abandoning.</a></div>
        
        
        <div class="learn"><strong>On this page,</strong> you learn about different <em>data compression algorithms</em> used in  common picture file formats.</div>
        <img class="imageRight noshadow" src="/bjc-r/img/6-computers/bjc-logo-original.png" alt="BJC logo uncompressed" title="BJC logo uncompressed" />
        <div class="todo">I was going to ask: "Can we use a copy of the logo without transparency? It would be easier to understand." But then I noticed that this image isn't transparent anyway, and so I just changed over to white. If we agree, can you please redo the row slice images? BTW, I changed to hex because that's what they <em>just</em> learned. --MF, 12/8/17</div>
		<p>This picture of the BJC logo (shown right) is 158 pixels wide and 186 pixels tall, for a total of 29,388 pixels. The BMP (bitmap) format includes each of those pixels in the picture file, at four bytes per pixel, so the file size is about 120kB.</p>
        <p>This is an inefficient way to store the information. <!--That's especially true for a cartoon-like picture such as this one.--> Think about the 158 pixels in the top row. The first 60 or so are white. Then come five pixels of <!--Snap<em>!</em>-control-palette--> yellowish orange (the top slice of the "b"). And the rest of that row are white.</p>
        <p class="indent">...<img src="/bjc-r/img/6-computers/top-row-of-pixels-in-bjc-logo.png" alt="top-row-of-pixels-in-bjc-logo">...</p>
        <p>Instead of storing all 158 pixels individually, we could compress them with <em>run-length encoding</em> and just store six values (three numbers and three colors):</p>
        
		<div class="sidenote"><div class="todo">I added this because I didn't get it until halfway down the page.</div>
		Run-length encoding stores the length of each run of a single color.</div>
        <table class="byte indent" width="30%" border="4" cellspacing="8" summary="run length encoding for top row of BJC logo">
            <tr>
                <th width="47%" scope="col">pixel count</th>
                <th width="53%" scope="col">color code</th>
            </tr>
            <tr>
                <td>60</td>
                <td>FFFFFF<!--(255, 255, 255)--></td>
            </tr>
            <tr>
                <td>5</td>
                <td>E7A720<!--(231, 167, 32)--></td><!--bgcolor="#EBBC71"-->
            </tr>
            <tr>
                <td>93</td>
                <td>FFFFFF<!--(255, 255, 255)--></td>
            </tr>
        </table>
          
        <div class="endnote">
            <a href="#hint-run-length-encoding" data-toggle="collapse">Click to learn more about run-length encoding.</a>
            <div id="hint-run-length-encoding" class="collapse">
                Not all the rows are that simple. A slice across the picture further down<!--near the top of the <em>j</em>--> looks like this:<br /> 
                <div class="todo">Is this a real row? I don't see anywhere in the image that looks like this... --MF, 12/8/17</div>
		... <img src="/bjc-r/img/6-computers/bjc-logo-original-middle-row.png" alt="bjc-logo-original-middle-row"> ... <br /> 
                Storing the length of each color in this row would require 24 pieces of information. But even this is better than 158. 
            </div>
        </div>
		
        <p>These days, the size of one picture isn't so significant, but think about every frame of a movie, and think about the time required to send the information over the Internet. Compression makes it easier to stream that movie to you.</p>

        <div class="forYouToDo" id="first">
        	<div class="todo">Oh, I just broke both of these excercises by clarifying the text. I think we should drop the first one and change the second to HEX.--MF, 12/8/17</div>
            <ol>
                <li>Right above the table, we mention "six values."  What are they?</li>
                <li>Use the Color Mixer at <a href="http://www.mathsisfun.com/hexadecimal-decimal-colors.html" target="_blank">RGB colors and hexadecimal notation</a> to check the result of the RGB codes (231,167,32).</li>
            </ol>
        </div>
        <p>Run-length encoding doesn't <em>lose</em> any information. The original picture can be reconstructed with every pixel exactly correct. BMP is an example of <strong>lossless compression</strong>. Another you may have hear of is PNG (Portable Network Graphics, pronounced "ping"), which uses a more complicated algorithm.</p>
    
		<div class="sidenote"><strong>Lossless</strong> means that <em>no</em> information is lost.</div>
    
        <p>Run-length encoding doesn't do well if the picture is a photograph where every pixel may be (at least slightly) different in color from its neighbors.   If the length of each color run is just one pixel, both run length <em>and</em> color will take twice as much space as just storing the color of each pixel.  So there are other compression algorithms. <!--The PNG  (Portable Network Graphics, pronounced "ping") encoding does <strong>lossless</strong> compression of  pictures. Its algorithm is complicated, using several different strategies depending on how  color varies in each small chunk of the image. The thing to remember is that PNG is lossless.--></p>
        <div class="todo">The PNG bit didn't flow here, so I folded it in above.</div>
		
        
		<div class="sidenote"><strong>Lossy</strong> means that <em>some</em> information is lost.  <!--Clever, eh?--></div>
    
        <p><strong>Lossy compression</strong> algorithms let file size be even smaller, but the original picture can't be perfectly reconstructed; information is <em>lost</em>. This would be terrible if these algorithms were used to compress a computer program or a novel, but people's perception of images not require extreme precision.</p>
        <p>The most commonly used lossy compression algorithm for pictures is called JPEG (or JPG, both pronounced "jay peg" for "Joint Photographic Experts Group," the committee that invented it). Lossy algorithms usually let you <em>control the degree of precision</em>. Below are two versions of a picture measuring 256Ã—192 pixels and the file sizes in various formats.</p>
        
        <div class="todo">The table and the images is a confusing paring. Which images represent which formats? I want to talk about how to make this clearer. --MF, 12/8/17</div>
        <div class="todo">Do we really need this second lossy example? I don't think so, but if you convince me, we are going to need to find examples that actually make the point. --MF, 12/8/17</div>
		
        <table class="indent" width="56%" border="4" cellspacing="8" summary="compression factors example">
            <tr>
                <th scope="col">format</th>
                <th scope="col">size</th>
            </tr>
            <tr>
                <td>BMP (encoding every pixel individually)</td>
                <td>148 kB</td>
            </tr>
            <tr>
                <td>PNG</td>
                <td>106 kB</td>
            </tr>
            <tr>
                <td>JPEG set at "best" in the Preview app on a Mac</td>
                <td>94 kB</td>
            </tr>
            <tr>
                <td>JPEG set at "worst" in the Preview app on a Mac</td>
                <td>5 kB</td>
            </tr>
        </table>
		
        <div class="comment">An image of <em>pebbles under water</em> is probably one of the <em>worst</em> things we could use here. I can barely tell them apart, and I know what to look for. Why not an image of a face, which the human mind is primed to analyze closely? --MF, 12/6/17</div>
        <p>
           <!--- Notice how tiny the JPEG worst file is! It must look terrible, right? Here are  that 5kB file and the original, uncompressed BMP file. Can you tell which is which?<br /> --->
            <img class="indent" src="/bjc-r/img/6-computers/pond.bmp" alt="pond pebbles" title="pond pebbles" />
            <img src="/bjc-r/img/6-computers/pond.jpg" alt="pond pebbles" title="pond pebbles" />
        </p>
                
        <div class="forYouToDo">
            <ol start="3">  
            	<li>Which image above is the 5kB version? How did you tell? </li>
            </ol>
        </div>
        
        <p>
            JPEG compression is designed for photographs; it's not so good for cartoon-like images. Here's the BJC logo in "best" and "worst" JPEG versions:<br />
            <div class="comment">This difference is SOOO much easier for me to see than in the pebbles image above. It breaks the point we are making. I will not be the only person to see it like this. --MF, 12/8/17</div>
            <img class="indent noshadow" src="/bjc-r/img/6-computers/bjc-logo-jpeg-best.jpg" alt="BJC logo, JPEG best">
            <img class="indent noshadow" src="/bjc-r/img/6-computers/bjc-logo-jpeg-worst.jpg" alt="BJC logo, JPEG worst"><br>
            The "best" one isn't too bad, but if you zoom in you can see "jaggies": a stairstep effect at the edges of the letters.  The "worst" one has even worse jaggies, wrong colors in the B, and bits of fuzz in what should be the transparent areas near the letters.
        </p>
        
        <div class="todo">I see the same jaggies in the "best" one here as I do in the image at the top off the page. That's confusing. --MF, 12/8/17</div>
		
        <div class="vocabFullWidth"><strong>: Lossy vs. Lossless</strong>
            <p><strong>Lossless</strong> compression (like PNG) is <em>reversible</em> (no loss in quality); you can reconstruct the original data. It works by removing redundant data.</p>
            <p><strong>Lossy</strong> compression (like JPG) is <em>not</em> fully reversible; you can only reconstruct an <em>approximation</em> of the original data. It works by removing details that people aren't likely to notice. </p>
        </div>
        <div class="todo">BH idea: We could do a FYTD where they have to run-length encode/decode something. Maybe even encoding/decoding images in Snap. --MF, 11/8/17</div>
        <p>Something like a picture file is an abstraction built on other abstractions. For example, a file is an abstraction. Also, you can include a picture in an email or text message, in which case, the <em>message</em> includes a <em>picture</em>, which is a kind of <em>file</em>, which is a kind of <em>bitstream</em>.</p>
        <div class="comment">EK 3.3.1F Security and privacy concerns arise with data containing personal information.<br />EK 3.3.1B Security concerns engender tradeoffs in storing and transmitting information.</div>
        <p>In Unit 1, Lab 4, you learned about privacy. If you post a picture of you and your friends to a website, you are making public information about where you were and what you were doing, which may violate both your own privacy and that of your friends. Also, if your phone is lost or stolen, someone else might get access to pictures you thought were private. That's why data on cellphones is normally encrypted so that it can't be recovered without your password. Having to type your password is an example of a trade-off between convenience and security.</p>

        <div class="forYouToDo" >
			<ol start="4">
				<li>
                    These questions are similar to those you will see on the AP CSP exam.
                    <!-- Question 1 -->
                    <div class="assessment-data" type="multiplechoice" identifier="Which is NOT an explanation of low image quality?"
                        hasinlinefeedback="true" maxchoices="1" responseIdentifier="ri1" shuffle="false">
                        <div class="prompt">A film student is recording a movie on his laptop. When the recording is done, he decides to save a copy on his computer. The student then notices that the saved copy is of much lower image quality than the original. Which of the following could NOT be a possible explanation for the lower image quality?</div>
                        <div class="choice" identifier="c1">
                            <div class="text">The movie was saved using fewer bits per second than the original movie.</div>
                            <div class="feedback">This is likely what happened.</div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">The copy of the movie file was somehow corrupted in the process of saving.</div>
                            <div class="feedback">This is possible, however if the file is corrupted it is unlikely to have a consistent negative impact on image quality. </div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">The movie was saved using a lossy compression technique.</div>
                            <div class="feedback">This is very likely.</div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">Whenever a file is saved from one place on a computer to another, some information is always lost.</div>
                            <div class="feedback">Correct. It is possible to make exact duplicates of digital information without any loss.</div>
                        </div>
                        <div class="responseDeclaration" identifier="ri1">
                            <div class="correctResponse" identifier="c4"></div>
                        </div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div class="assessment-data" type="multiplechoice" identifier="Which are examples of lossless transformation?"
                        hasinlinefeedback="true" maxchoices="2" responseIdentifier="ri2" shuffle="true">
                        <div class="prompt">Red, green, and blue values (an RGB triplet) are used to represent each individual pixel of a digital image. In a lossless transformation of the image, no information is lost during the transformation; the original image can be reconstructed from the transformed image.  A visual artist is processing a digital image and overwriting the original.  Which of the following describe lossless transformations of the digital image from which the original image can be recovered? <em>Choose two answers.</em></div>
                        <div class="choice" identifier="c1">
                            <div class="text">Creating the negative of an image, where colors are reversed and dark areas appear light.</div>
                            <div class="feedback">Correct. This transformation is reversible and is an example of a lossless transformation.</div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">Blurring the edges of an image.</div>
                            <div class="feedback">The blurring blends colors at the edges of the image and once colors have blended it is impossible to retrieve the original RGB values of the pixels involved.</div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">Creating a gray scale copy of an image.</div>
                            <div class="feedback">The gray scale of an image replaces each RGB value with their average and once colors have been averaged it is impossible to retrieve the original RGB values of the pixels.</div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">Creating a vertically flipped copy of the image.</div>
                            <div class="feedback">Correct. This transformation is reversible and is an example of a lossless transformation.</div>
                        </div>
                        <div class="responseDeclaration" identifier="ri2">
                            <div class="correctResponse" identifier="c1"></div>
                            <div class="correctResponse" identifier="c4"></div>
                        </div>
                    </div>
                </li>
			</ol>
		</div>
		

	</body>
</html>