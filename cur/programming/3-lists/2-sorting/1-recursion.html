<!DOCTYPE html>
<html lang="en">
    <head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();};
		window.hinttext='<img src="/bjc-r/img/3-lists/add-hint.png" alt="(( ) + (add items of ( )))">';
        </script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
        <title>Unit 3 Lab 2: Sorting, Page 1</title>
    </head>

<body>
<h2>Recursion Revisited</h2>
    <div class="learn">
<strong>In this lab</strong> you will sort your contact list alphabetically by name.<br />
<strong>On this page</strong> you will review the technique of <em>recursion</em>.</div>
<h3>Recursive Graphics</h3>
<div class="forYouToDo" id="first">
<ol>
<li>In <a href="/bjc-r/cur/programming/2-complexity/4-abstraction/2-fractal-art.html">Unit 2</a> you wrote a recursive program to draw this picture:<br />
<img src="/bjc-r/img/3-lists/gasket.png"  alt="Sierpinski gasket"><br />
Open your project <strong>U2L4-FractalArt</strong> and save it as <strong>U3L2-FractalArt</strong>. Then look inside the <code>nested triangle</code> block.
Your solution may not be exactly this, but it's probably close:<br />
<img src="/bjc-r/img/3-lists/nested-triangle.png"  alt="nested triangle, size: (size) color: (color):  if (size &gt; 2) [repeat 3 [set pen color to (color); move (size) steps; nested triangle, size: (size / 2) color: (color + 10); turn 120 degrees]]"></li>
 <div class="vocab"><br />
A <strong>top-level script</strong> is one that's in the scripting area, not inside the definition of a block.</div>              
                <img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>When you run <code>nested triangle</code> from a top-level script, how many times does that invocation run the purple block that calls <code>nested triangle</code>?</li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>Which instruction inside <code>nested triangle</code> draws the three lines shown in black in the picture below?<br />
<img src="/bjc-r/img/3-lists/color-gasket.png" alt="gasket with smaller copies in color"></li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>If the sprite starts out pointing to the right, which smaller fractal (red, green, or blue) is drawn first?</li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>What is the purpose of the <code>if</code> block in this code? (If you're not sure, you might try editing <code>nested triangle</code> to remove it, and see what happens.)</li>
</ol>
</div>
<div class="takeNote">
<p>A recursive <em>problem</em> is one in which the desired result includes a smaller version of itself, such as the green (or red or blue) fractal inside the bigger fractal.  A recursive <em>procedure</em> is one that calls itself inside its definition. Do you see why a recursive procedure is likely to be a good solution to a recursive problem?</p>
<p>If a recursive procedure calls itself, and that call also calls itself, and <em>that</em> call also calls itself... the result will be an <em>infinite loop</em>, which means that the program will keep running forever (or until it runs out of memory). To avoid that bug, every recursive procedure must have a <em>base case,</em> a simple input for which the procedure can do its job without calling itself.</p></div>
                <img class="imageRight" src="/bjc-r/img/icons/save-mini.png" alt="Save Your Work" title="Save Your Work" />

<h3>Recursive Reporters</h3>

<div class="forYouToDo">
<ol start="6">
                <img class="imageRight" src="/bjc-r/img/icons/import-tools-mini.png" alt="Import Tools" title="Import Tools" />
<li>Write this procedure:<br />
<img src="/bjc-r/img/3-lists/add-nums.png" alt="add numbers of list (numbers): report (combine with (+) items of (numbers)"><br />
Try some examples to figure out what it does:<br />
<img src="/bjc-r/img/3-lists/add-ex-1.png" alt="add numbers in list (list 7 8 1)"><br />
<img src="/bjc-r/img/3-lists/add-ex-2.png" alt="add numbers in list (list 9 8 2 7)"><br />
<img src="/bjc-r/img/3-lists/add-ex-3.png" alt="add numbers in list (list 5)">
</li>
<div class="sidenoteBig">No, you wouldn't make this change in real life; write  programs in the simplest, most elegant way you can.  But we want to start you with simple recursive reporters before we get to the more complicated sorting program.</div>
<li>Now edit the block and rewrite it to use recursion instead of using the <code>combine</code> function.
<ol type="a">
<li>Build this framework (without the comments):<br />
<img src="/bjc-r/img/3-lists/add-recur-framework.png" alt="if (empty slot for test) [report (empty slot for value)] else [report (empty slot for value)]"></li>
<li><strong>What should the base case be?</strong> What's the smallest possible list of numbers? (Actually there are two plausible answers to that question, and you can write a working procedure either way.) Fill in the hexagonal input slot in the <code>if</code> block.</li>
<li><strong>What should your procedure report in that smallest case?</strong> <a id="hint" onClick="document.getElementById('hint').innerHTML='The block is supposed to report a number, not a list!';">Super big hint if you can't get it to work.</a></li>
<li><strong>What should your procedure report in the recursive case?</strong> You have to find a <em>smaller, similar subproblem</em> just as you did for the triangle fractal. Generally, when writing recursive blocks with lists as input, the most common idea is to split the list into <em>its first item</em>(<img src="/bjc-r/img/3-lists/item-1-of.png" alt="item 1 of">) and <em>all the other items</em> (<img src="/bjc-r/img/3-lists/all-but-first.png" alt="all but first of">).
<li>What are you going to do with <code>all but first of</code> the list? <a id="hint2" onClick="document.getElementById('hint2').innerHTML='What makes this a <em>recursive</em> procedure?';">You really don't need this hint.</a>

<li>How are you going to combine the first item with the result of part (e) to get the overall result?
</ol>
</li>
<li>Build this block:<br />
<img src="/bjc-r/img/3-lists/initials-map.png" alt="initials (words): report (map (letter 1 of ( )) over (words))"><br />
What does it do?</li>
                <img class="imageRight" src="/bjc-r/img/icons/save-mini.png" alt="Save Your Work" title="Save Your Work" />
<li>Now rewrite it using recursion instead of <code>map</code>.
<div class="narrower">
<img src="/bjc-r/img/3-lists/item-1-of.png" alt="item 1 of"> and <img src="/bjc-r/img/3-lists/all-but-first.png" alt="all but first of"> are the main <em>selectors</em> for lists. Selectors are all you needed for problem 7 because the reported result wasn't a list. If you want to write a block that reports a list, you also need the <em>constructor</em> <img src="/bjc-r/img/3-lists/in-front-of.png" alt="() in front of ()">, which makes a new list with one new item in front of an existing list.</div>
</li>
</ol>
</div>
</body>
</html>
