<!DOCTYPE html>
<html lang="en">
    <head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();};
		window.hinttext='<img src="/bjc-r/img/3-lists/add-hint.png" alt="(( ) + (add items of ( )))">';
        </script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
        <title>Unit 3 Lab 2: Sorting, Page 1</title>
    </head>

<body>
<h2>Recursion Revisited</h2>
    <div class="learn">
<strong>In this lab</strong> you will sort your contact list alphabetically by name.<br />
<strong>On this page</strong> you will review the technique of <em>recursion</em>.</div>
<h3>Recursive Graphics</h3>
<div class="forYouToDo" id="first">
<ol>
<li>In <a href="/bjc-r/cur/programming/2-complexity/4-abstraction/2-fractal-art.html">Unit 2</a> you wrote a recursive program to draw this picture:<br />
<img src="/bjc-r/img/3-lists/gasket.png"  alt="Sierpinski gasket"><br />
Open your project <strong>U2L4-FractalArt</strong> and save it as <strong>U3L2-Recursion</strong>. Then look inside the <code>nested triangle</code> block.
Your solution may not be exactly this, but it's probably close:<br />
<img src="/bjc-r/img/3-lists/nested-triangle.png"  alt="nested triangle, size: (size) :  if (size &gt; 2) [repeat 3 [set pen color to (color); move (size) steps; nested triangle, size: (size / 2) color: (color + 10); turn 120 degrees]]"></li>
<strong>Get to know this code well:</strong>
 <div class="vocab">
   <p><br />
     A <strong>top-level script</strong> is one that's in the scripting area, not inside the definition of a block.</p>
   <p>An <strong>invocation</strong> is a use of a block. For example, <img src="/bjc-r/img/3-lists/7+8+1.png" alt="(7+8)+1"> makes two invocations of <code>+</code>. The verb form is <strong>invoke</strong>.</p>
 </div>              
                <img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>When you invoke <code>nested triangle</code> from a top-level script, how many times does <em>that invocation</em> (not counting invocations within invocations) run the purple block that invokes <code>nested triangle</code>?</li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>Which instruction inside the top-level invocation of <code>nested triangle</code> draws the three lines shown in black in the picture below?<br />
<img src="/bjc-r/img/3-lists/color-gasket.png" alt="gasket with smaller copies in color"></li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>If the sprite starts out pointing to the right, which smaller fractal (red, green, or blue) is drawn first?</li>
<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
<li>What is the purpose of the <code>if</code> block in this code? (If you're not sure, you might try editing <code>nested triangle</code> to remove it, and see what happens.)</li>
</ol>
</div>
<div class="takeNote">
<p>A recursive <em>problem</em> (the thing you're trying to do, not the code to do it) is one in which the desired result includes a smaller version of itself, such as the green (or red or blue) fractal inside the bigger fractal.  A recursive <em>procedure</em> (the actual code) is one that calls itself inside its definition. Do you see why a recursive procedure is likely to be a good solution to a recursive problem?</p>
<p>If a recursive procedure calls itself, and that call also calls itself, and <em>that</em> call also calls itself... the result will be an <em>infinite loop</em>, which means that the program will keep running forever (or until it runs out of memory). To avoid that bug, every recursive procedure must have a <em>base case,</em> a simple input for which the procedure can do its job without calling itself. (The base case of <code>nested triangle</code> happens when <var>size</var> ≤ 2; in that case the procedure doesn't have to do anything.)</p></div>
                <img class="imageRight" src="/bjc-r/img/icons/save-mini.png" alt="Save Your Work" title="Save Your Work" />

<h3>Recursive Reporters</h3>

<div class="forYouToDo">
<ol start="6">
                <img class="imageRight" src="/bjc-r/img/icons/import-tools-mini.png" alt="Import Tools" title="Import Tools" />
                        <li>Make friends with the <img src="/bjc-r/img/3-lists/combine-block.png" alt="combine with ( ) items of ( )"> block.  Try these examples:<br />
                          <div class="sideHOMbig">Unlike <code>map</code> and <code>keep</code>, <code>combine</code> requires a function with <em>two</em> empty input slots.</div>
                          <img src="/bjc-r/img/3-lists/combine-plus.png" alt="combine with (+) items of (list 7 8 1)"><br />
                          <img src="/bjc-r/img/3-lists/combine-times.png" alt="combine with (*) items of (list 7 8 1)"><br />
                          <img src="/bjc-r/img/3-lists/combine-min.png" alt="combine with (min) items of (list 7 8 1)">
                        </li>
                      <div class="endnote">
                         Unlike its friends <code>map</code> and <code>keep</code>, <code>combine</code> is mostly used with one of only these six functions in its first input slot:<br />
                          <img src="/bjc-r/img/3-lists/plus.png" alt="+"> <img src="/bjc-r/img/3-lists/times.png" alt="&times;"><br />
                          <img src="/bjc-r/img/3-lists/and-block.png" alt="and"> <img src="/bjc-r/img/3-lists/or-block.png" alt="or"><br />
                          <img src="/bjc-r/img/3-lists/join.png" alt="join"> <img src="/bjc-r/img/3-lists/join-words.png" alt="join words"><br />
                          Among blocks you might write yourself, there are only two likely candidates:<br />
                          <img src="/bjc-r/img/3-lists/max.png" alt="max"> <img src="/bjc-r/img/3-lists/min.png" alt="min"><br />
                        <a data-toggle="collapse" href="#hint-3">Why so few?</a>
                        <div id="hint-3" class="collapse">                          The function has to be <em>associative</em>, meaning that it doesn't matter what order you group the items in; (7&thinsp;+&thinsp;8)&thinsp;+&thinsp;1 is the same as 7&thinsp;+&thinsp;(8&thinsp;+&thinsp;1) (work it out yourself), but (7&thinsp;−&thinsp;8)&thinsp;−&thinsp;1 is different from 7&thinsp;−&thinsp;(8&thinsp;−&thinsp;1).
                        So <img src="/bjc-r/img/3-lists/combine-minus.png" alt="combine with (-) items of (list 7 8 1)"> would be ambiguous.</div>
    </div>

                  </li>
<li>Write this procedure:<br />
 <img src="/bjc-r/img/3-lists/sumof-combine.png" width="514" height="117" alt="sum of (numbers) : report (combine with (+) items of (numbers)"> <br />
Try some examples to figure out what it does:<br />
<img src="/bjc-r/img/3-lists/sumof-781.png" alt="sum of (list 7 8 1)"><br />
<img src="/bjc-r/img/3-lists/sumof-9827.png" alt="sum of (list 9 8 2 7)"><br />
<img src="/bjc-r/img/3-lists/sumof-5.png" alt="sum of (list 5)">
</li>
<li>Now edit the block and rewrite it to use recursion instead of using the <code>combine</code> function.
<div class="endnote">No, you wouldn't make this change in real life; write  programs in the simplest, most elegant way you can.  But we want to start you with relatively simple recursive reporters before we get to the more complicated sorting program on the next page. The simplest examples of list recursion are the ones that have historically been abstracted into higher order functions.</div>
<ol type="a">
<li>Build this framework (without the comments):<br />
<img src="/bjc-r/img/3-lists/sumof-framework.png" alt="if (empty slot for test) [report (empty slot for value)] else [report (empty slot for value)]"></li>
<li><strong>What should the base case test be?</strong> What's the smallest possible list of numbers? (Actually there are two plausible answers to that question, and you can write a working procedure either way.) Fill in the hexagonal input slot in the <code>if</code> block.</li>
<li><strong>What should your procedure report in that  case?</strong> <a id="hint" onClick="document.getElementById('hint').innerHTML='The block is supposed to report a number.';">Super big hint if you can't get it to work.</a></li>
<li><strong>What should your procedure report in the recursive case?</strong> You have to find a <em>smaller, similar subproblem</em> just as you did for the triangle fractal. Generally, when writing recursive blocks with lists as input, the most common idea is to split the list into <em>its first item</em> (<img src="/bjc-r/img/3-lists/item-1-of.png" alt="item 1 of">) and <em>all the other items</em> (<img src="/bjc-r/img/3-lists/all-but-first.png" alt="all but first of">).
<div class="narrower">
<img src="/bjc-r/img/3-lists/item-1-of.png" alt="item 1 of"> and <img src="/bjc-r/img/3-lists/all-but-first.png" alt="all but first of"> are the main <em>selectors</em> for lists.</div>
<ol style="list-style-type: lower-roman;">
<li>What are you going to do with <code>all but first of</code> the list? <a id="hint2" onClick="document.getElementById('hint2').innerHTML='What makes this a <em>recursive</em> procedure?';">You really don't need this hint.</a></li>
<li>How are you going to combine the first item with the result of part (i) to get the overall result?
</li></ol>
</li>
<li>Build this block:<br />
<img src="/bjc-r/img/3-lists/initials-map.png" alt="initials (words): report (map (letter 1 of ( )) over (words))"><br />
What does it do?</li>
                <img class="imageRight" src="/bjc-r/img/icons/save-mini.png" alt="Save Your Work" title="Save Your Work" />
<li>Now rewrite it using recursion instead of <code>map</code>.
<div class="narrower">
Selectors are all you needed for problem 8 because the reported result wasn't a list. If you want to write a recursive block that reports a list, you also need the <em>constructor</em> <img src="/bjc-r/img/3-lists/in-front-of.png" alt="() in front of ()">, which makes a new list with one new item in front of an existing list.</div>
</li>
</ol>
</div>
</body>
</html>
