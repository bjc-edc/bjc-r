<!DOCTYPE html>
<html lang="en">
    <head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
        <script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();}</script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
		<title>Unit 3 Lab 4: Building Data Visualization Tools, Page 1</title>
    </head>

    <body>
        <div class="todo">
            <strong>Purpose</strong>: Students will learn about basics of data visualization and create a <em>general purpose</em> tool for displaying bar graphs which they can use even in their other classes.  <br />
            <strong>Why here</strong>: This is a lab about data visualization. Bar graphs are fundamental tools in data visualization. <br />
            <strong> Why now</strong>: Students are already familiar with ideas of abstraction and general purpose blocks from U1,2.  Now they will put those skills into good use in the context of data visualization, breaking a difficult task into smaller manageable parts and creating a versatile computational tool.  They will have basic exposure to scaling so when they are given scaling tools in the next pages (Graphing App) it won't feel completely like magic.<br /><br />
            <a href="https://drive.google.com/open?id=0B4eoxti-ygkqTF91S1VGb1hqdHM" target="_blank">Some feedback from Al</a> that may not have been integrated but should be before further revisions to this page. --MF, 6/29/17
        </div>
        
        <h2>Creating Bar Graphs</h2>
		
        <div class="learn">  
        	<p>
            	<strong>In this project,</strong> you will create a <em>general purpose</em> data visualization tool that can generate bar graphs for a variety of data sets.  You will practice using <em>abstraction</em> and the higher order function <code>map</code>.<br />
        		<img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/CO2Table.png" height="300" alt="Table of CO2 Emissions by Country" title="Table of CO2 Emissions by Country"/><img  src="/bjc-r/img/3-lists/BarGraph_img/BarGraphAnimation.gif" height="300" alt="bar graph of 2011 Top CO2 Emissions" title="bar graph of 2011 Top CO2 Emissions" />
            </p>
        </div>
        
        <div class="forYouToDo" id="first">
            <ol>
                <li>
                <img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner">
                    Technology has come at the cost of environmental pollution around the world. In collaboration with your partner, examine the data table given on <a href="http://www.ucsusa.org/global_warming/science_and_impacts/science/each-countrys-share-of-co2.html#.WVqJI9PytE5" target="_blank">this link</a>. 
                    <ol>
                        <li>What countries have the highest Carbon Dioxide (CO<sub>2</sub>) emissions?</li>
                        <li>What countries have the highest CO<sub>2</sub> emissions per capita (per person)?</li>
                        <li>Which of these measures do you think is a better indicator of a country's contribution to global environmental pollution?</li>
                    </ol>
                </li>
                <div class="takeNote">You can gain knowledge and insights by talking to others (in person or online) as you form questions and hypotheses about data.</div>
                <li>
                	Open this <a class="run" href="/bjc-r/prog/3-lists/U3L4-BarGraph.xml">starter project</a>. 
                    <div class="endnote">
                        This file contains
                        <ul>
                            <li>
                                A <em>constructor</em> of a new ADT (Abstract Data Type) called <code>data-record</code> with two fields <code>label</code> and <code>value</code>.<br />
                                <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/datalabelvaluewithResult.png"  height="135" alt="data-record ADT" title="data-record ADT"/> 
                            </li>
                            <li>
                                Two <em>selectors</em> for the new ADT, <!--<code>label from data-record</code> and <code>value from data-record</code>-->to extract specific data from a <code>data-record</code> input.<br />
                                <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/getlabelwithResult.png" height="50" alt="label from data-record selector" title="label from data-record selector"/><br />
                                <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/getvaluewithResult.png"  height="50" alt="value from data-record selector" title="value from data-record selector"/><br />
                            </li>
                            <li>
                                A <code>max of list</code> reporter that finds the largest element of a list.<br />
                            	<img  class="indent" src="/bjc-r/img/3-lists/BarGraph_img/maxoflistwithResult.png"  height="50" alt="max of list reporter" title="max of list reporter"/>
                            </li>
                        </ul>
                    </div>
                    Explore the blocks already written for you and understand how they work.<br />
                </li>
                <li>
                    Develop code for the <code>draw axes</code> block.  It should draw the <em>horizontal</em> and <em>vertical</em> axes based on the given stage coordinates of the origin <var>x0</var>, <var>y0</var> and the given length, height information.  <br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/drawAxis.png"  height="60" alt="draw axes block" title="draw axes block"/><br />
                    <div class="endnote">
                        This diagram may help you understand how the given information will determine the <em>horizontal</em> and <em>vertical</em> axes. As you will be graphing only positive values, the axes should meet in the lower left corner as shown in the diagram.  There should not be any labels or tick marks at this point.  The markings in the diagram are shown for clarity. <br />
                        <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/axeshorizvert.png"  height="200" alt="x-y axes" title="x-y axes"/>
                    </div>
                    In the <code>draw axes</code> block also make sure that the coordinates of the origin is stored in global variables <var>x-origin</var>, <var>y-origin</var>.  In the upcoming steps of this project, other blocks will need this information to properly allign the bars and labels .<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/globalx0y0.png" height="100" alt="Variables x-origin, y-origin" title="Variables x-origin, y-origin"/>
                    <img src="/bjc-r/img/3-lists/BarGraph_img/setXYOrigin.png"  height="75" alt="Set x-origin, y-origin" title="Set x-origin, y-origin"/>
                    <div class="sidenote">
                        You can import the basic <code>label</code> block in your new projects via the "Import tools" option of the File menu:<br />
                        <img src="/bjc-r/img/3-lists/BarGraph_img/importTools.png"  height="150" alt="Import tools option" title="Import tools option"/>
                    </div>
                </li>
                <li>
                    Explore the basic <code>label</code> block included in the starter project.  Try changing the location and direction of the drawing sprite.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/labelofsize.png"  height="45" alt="Basic label block" title="Basic label block"/>
                    <div class="endnote">
                        <!--If you look inside the basic <code>label</code> block, you will see a lot of mysterious code written in JavaScript.  <br />
                        <img src="/bjc-r/img/3-lists/BarGraph_img/labelwithJS.png"  height="100" alt=""/><br />
                        Snap<em>!</em> offers this advanced capability. But do not be worried, you are <em>not</em> expected to understand how this code works.  However, please--> 
                        <p> Note that the <code>label</code> block does not need to have <code>pen down</code> in order to do its writing.  Having <code>pen down</code>  with the <code>label</code> block may cause some undesired effects.<br /><br />
                            You're not required to look inside the <code>label</code> block, but if you do, you'll see something unfamiliar.<br />
                            <a href="#hint-1" data-toggle="collapse" class="collapsed">Click here for more.</a>
                            <div id="hint-1" class="collapse">
                                <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/labelwithJS.png"  height="150" alt="Label with JavaScript" title="Label with JavaScript"/><br />
                                Snap<em>!</em>, like pretty much everything that runs in a browser, is written in a programming language called <em>JavaScript</em>.  The <code>label</code> block is implemented using a Snap! <code>JavaScript function</code>  block that allows advanced users to extend Snap<em>!</em> by adding new blocks written in JavaScript.
                        	</div>
						</p>
                        You don't need to know how the <code>label</code> block works to be able to use it.  By hiding its inner complexity from its users, the <code>label</code> block is a perfect example of <em>abstraction</em>.<br />
                        
                    </div>
                </li>
                <li>
                    Use the basic <code>label</code> block to develop code for the more elaborate <code>label</code> block that will place a label with the inputted specifications (text, size and direction.) <br /><br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/labelChina.png"  height="45" alt="label block" title="label block"/><img  src="/bjc-r/img/3-lists/BarGraph_img/China.png"  height="100" alt="China label" title="China label"/><br /><br />
                    Note that the orientation directions should follow Snap<em>!</em> ’s convention for directions (0<sup>o</sup> up, 90<sup>o</sup> right, 180<sup>o</sup> down, 270<sup>o</sup> left).  Test your new <code>label</code> with the four directions.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/ChinaLabels.png"  height="250" alt="China label in 4 directions" title="China label in 4 directions"/>
                </li>
                <li>
                    Develop code for the <code>draw bar</code> block. It should draw a vertical bar (a line with the given width and height) straight up from the current location with a label placed underneath the bar.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/drawbar.png" height="45" alt="draw bar block" title="draw bar block"/>
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/barGermany.png" height="200" alt="Germany bar" title="Germany bar"/>
                    <div class="endnote">
                        You may wish to review your earlier <a href="/bjc-r/cur/programming/2-complexity/4-abstraction/3-brick-wall.html">Brick Wall</a> project to remind yourself how to draw bars with a pen of a given width.  You don't need to import <code>set flat line ends to</code> block from that project but make sure that you have "Flat line ends" selected from the Settings menu to draw rectangular bars.  You can see below the difference in two types of lines drawn.<br />
                        <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/FlatLineEnds.png" height="200" alt="Flat line ends option" title="Flat line ends option"/>
                        <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/FlatLineBar.png"  height="100" alt="Flat line bar" title="Flat line bar"/>
                        <img src="/bjc-r/img/3-lists/BarGraph_img/RoundedBar.png"  height="120" alt="Rounded line bar" title="Rounded line bar"/>
                    </div>
                </li>
                <li>
                    Develop code for the <code>draw bars</code> block, which should draw a series of labelled bars of the desired width and an appropriate height that start on the left and continue to the right.  In order to properly level the bars and the labels you may need to refer to the global variables <var>x-origin</var>, <var>y-origin</var>.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/drawthebars.png"  height="60" alt="draw bars block" title="draw bars block"/>
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/bars.png"  height="250" alt="Country bars" title="Country bars"/>
                </li>
                <div class="narrower">
                    Note that given a maximum bar height, the heights of all the bars can be computed as a fraction of this maximum bar height.  Using the following proportion, you can derive each country's bar height:
                    <span class="katex-block" > \frac{\text{country bar height}}{\text{max bar height}} =  \frac{\text{country data value}}{\text{max data value}}</span>
                    For example, if maximum bar height=240 and you want to find how tall the bar for USA should be, you first find the largest value in the data set which is 8715 (from China) and do the following computation<br />
                    <span class="katex-block" > {\text{USA bar height}} =  {\text{max bar height .}}\frac{\text{USA data value}}{\text{max data value}} = {\text{240 .}}\frac{\text{5491}}{\text{8715}}\approx {\text{151}}</span>
                    <!--<img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/BarHeightComputation.png"  height="70" alt="" title=""/>--><br />
                    While finding the maximum of the data values, first you need to get a list of values and then apply the <code>max of list</code> block.  The following block which uses the selector <code>value from data-record</code> will extract a list of <em>values</em> from the given <var>data list</var>.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/mapgetvalue.png"  height="45" alt="map value from data-record() over (data list)" title="map value from data-record() over (data list)"/>
                </div>
                <li>
                    Develop code for the <code>label vertical axis</code> block so that it labels the vertical axis based on the specified inputs. For simplicity, you can assume that the labels will always split the vertical axis into 10 equal parts (using 11 tick marks) like this:<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/labelyaxis.png"  height="45" alt="label y-axis block" title="label y-axis block"/>
                    <img src="/bjc-r/img/3-lists/BarGraph_img/yaxislabels.png"  height="250" alt="y-axis labels" title="y-axis labels"/>
                </li>
                <li>
                    Now you are ready to put everything together and develop code for the <code>Bar Graph</code> drawing block for a given <var>data list</var> input.  Fill in the blanks.  <br />
                    <div class="sidenote">You are allowed to use any other blocks as you need in the definition of <code>Bar Graph</code>.</div>
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/BarGraphdata.png"  height="180" alt="Bar Graph block" title="Bar Graph block"/>
                </li>
                <li>
                    When everything is done, the following code, with a few extra labels for the graph title, should produce a bar graph as shown below:<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/codeCO2EmissionsData.png" height="45" alt="Code for Bar Graph CO2 Emissions data" title="Code for Bar Graph CO2 Emissions data"/><br />
                    <div class="sidenote">Please note that the lowest value on the vertical axis must be <em><strong>zero</strong></em> for this bar graph to be a legitimate data visualization.  If, for example, you had started the vertical axis at 5000, it would look like China is a vastly worse polluter than the USA.  <br /><br />In general, be very skeptical of graphs presented to you that do not start at <em><strong>zero</strong></em>.</div>
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/CO2bargraph.png"  height="300" alt="Bar Graph of CO2 Emissions" title="Bar Graph of CO2 Emissions"/>
                </li>
                <li>
                    Your coding should be general enough to accommodate a new set of data (also included in your starter file):<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/codeCO2EmissionsPerCapita.png"  height="45" alt="Code for Bar Graph CO2 Emissions per capita data" title="Code for Bar Graph CO2 Emissions per capita data"/><br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/CO2EmissionsPerCapita.png"  height="300" alt="Bar Graph CO2 Emissions per capita" title="Bar Graph CO2 Emissions per capita"/>
                </li>
                <div class="endnote">
                    Note: "per capita" means "per person".  So, for example for China, the total CO<sub>2</sub> emissions was divided by the population:<br />
                    <span class="katex-block" >\frac{\text{8715 Million metric tons}}{\text{1.337 Billion persons}} =  {\text{6.52 metric tons per person}}</span>
                    <!--<img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/percapitacomputation.png" height="70" alt="" title=""/>-->
                	These values are already given to you in the starter file as <code>CO<sub>2 </sub>Emissions per capita Data</code>.
                </div>
                <img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner">
                <li>In collaboration with your partner, compare the two bar graphs.  What insights does each graph provide about CO<sub>2</sub> emissions? Is one better than the other?</li>
            </ol>
        </div>
        
        <div class="ifTime">
        
            <ol start="13">
            	<li> 
                <strong>Data Processing:</strong> Look at the Variables palette to locate the <code>Country-GDP-Population Data</code> block.  When you examine its contents you will notice that it is a list of lists containing data on the GDP (<a href="https://en.wikipedia.org/wiki/Gross_domestic_product" target="_blank">Gross Domestic Product</a>) and population size for each of the countries you studied in this project.  <em>Process</em> the data so you can create a bar graph for the GDP <strong>per capita</strong> of each country.<br />
                
                <br />
                <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/Country-GDP-Population.png"  height="200" alt="Country-GDP-Population Data" title="Country-GDP-Population Data"/>
               <br /><br />
                
                Click here for a<a href="#hint-2" data-toggle="collapse" class="collapsed"> hint</a> on how to <em>process</em> data quickly using the higher order function <code>map</code>.
                            <div id="hint-2" class="collapse">
                            These blocks may help:<br />
                            <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/dataProcessHint.png"  height="100" alt=""/><br />
                                
                        	
                </div>
                </li>
                <li>Now collect some data in your class or from the internet on a topic you care about that would lend itself to visualization with a bar graph.  Use your Snap<em>!</em> program to visualize your data.  Share your work with your classmates.</li>
            </ol>
        </div>
        
        
        <div class="takeItFurther">
            <ol type="A">
                <li>
                    Sometimes it is more convenient to present your bar graph with horizontal bars instead of vertical ones.  Modify your code so that it takes an input indicating which type of bar graph (horizontal or vertical) is to be generated.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/HorizontalBarGraph.png" height="300" alt="Horizontal Bar Graph" title="Horizontal Bar Graph"/>
                </li>
                <li>
                    Histograms display <em>numerical</em> data grouped into ranges (called bins) and plotted as bars.  For example, the histogram below shows the number of students in each age group at a summer camp.  Learn about histograms and create a data visualization tool in Snap<em>!</em> for displaying histograms. <br />
                    <img class="indent" src="/bjc-r/img/3-lists/BarGraph_img/Histogram.JPG"  height="250" alt="Histogram" title="Histogram"/>
                </li>
            </ol>
        </div>
    </body>
</html>
