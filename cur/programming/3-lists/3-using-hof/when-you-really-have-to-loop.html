<html>
    <head>
        <script src="/bjc-r/llab/loader.js"></script>
        <title>Lab 3: Using Higher-Order Functions</title>
    </head>

    <body>
    
    <h2>When You Really Have to Loop</h2>
    
    <div class="todo">
    <ul>
    	<li>JK: I like the Take it further question, BUT the only solution I was able to come up with uses "add () to list" which falls under the list mutation stuff and has been avoided thus far in the unit. Is there another solution I'm missing? Or should we just get rid of that question and leave it for later?</li>
        <li>JK: Any other suggestions for interesting problems here?</li>
    </ul>
    </div>
    
    <div class="forYouToDo" id="first">
    	<ol>
        <li>Consider the block <img src="/bjc-r/img/3-lists/increasing_block.png" alt="green predicate block: increasing?(list)" title="green predicate block: increasing?(list)" />. It returns <code>true</code> when the items of the list are in increasing order (equal neighbors are ok), or <code>false</code> otherwise.<br>
        <img src="/bjc-r/img/3-lists/increasing_true.png" alt="increasing?(list 1,4,7,10) is true" title="increasing?(list 1,4,7,10) is true" /><br>
        <img src="/bjc-r/img/3-lists/increasing_false.png" alt="increasing?(list 1,7,4,10) is false" title="increasing?(list 1,7,4,10) is false" />
        	<ol>
            <li><div class="sidenote">The question mark at the end of <code>increasing?</code> is a convention for naming predicates (blocks that answer yes-or-no questions).</div><img src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />Explain why <code>map</code> won't help you write <code>increasing?</code>.</li>
            <li><img src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />Explain why <code>keep</code> won't help you write <code>increasing?</code>.</li>
            <li><img src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" />Explain why <code>combine with</code> won't help you write <code>increasing?</code>.</li>
            </ol>
        </li></ol>
    </div>
    
    <div class="dialogue">
      <div><span>Alphie:</span> Great, so now we know a bunch of functions that <em>won't</em> help us. How <em>do</em> we write <code>increasing?</code></div>
      <div><span>Betty:</span> Let's try talking through what we want the code to do. You know, the algorithm.</div>
      <div><span>Alphie:</span> Ok. <em>(Pauses to think.)</em> We could compare item 1 to item 2 and check that item 1 is less. Then compare item 2 to item 3, then item 3 to... Well, until we reach item "length of" the list.</div>
      <div><span>Betty:</span> So as we compare two items at a time, we end up with a list of "true"s and "false"s. And then we would check that list, and if there's even one "false" in there, then <code>increasing?</code> is false.</div>
      <div><span>Alphie:</span> Yeah, that works... </div>
          <div class="stagedir">They pause to think.</div>
      <div><span>Betty:</span> I think we can do this better. We don't need to keep track of the item number because we don't care where the out-of-order numbers are. Also, we don't need the middle step of making a list of "true"s and "false"s. As soon as one of the comparisons is "false", we know <code>increasing?</code> is false. </div>
      <div><span>Alphie:</span> You're saying we don't care about the item number, just the item itself. So we could use a <code>for each</code> loop. For each item in the list, we compare it to... what? </div>
      <div><span>Betty:</span> What if we make a variable that keeps track of the lowest number so far? Then we can check each item against that number, then reset the variable to equal to current item.</div>
      <div><span>Alphie:</span> Ok, here's what I have so far.</div>
          <div class="stagedir"><a class="run" href="/bjc-r/prog/3-lists/U3Lab3Increasing.xml"> <img border="0" title="increasing script (with mistake)" alt="increasing script (with mistake)" src="/bjc-r/img/3-lists/increasing_wrongscript.png" /> </a></div>
    </div>


	<div class="forYouToDo">
    	<ol start="2">
        <li>Alphie and Betty's script contains a mistake! For example, their script gives this result:<br>
        <img border="0" title="increasing(1,7,4,10)=true" alt="increasing(1,7,4,10)=true" src="/bjc-r/img/3-lists/increasing_truemistake.png" /><br>
        Click their script to open a new file and fix their code.</li>
        </ol>
    </div>
        
        
        
        
<!--
        <p>
            Consider the following problem:
        </p>
        <div class="alert quoteGreen">
            <p>
                Write a predicate <code>increasing?</code> that takes a list of numbers as input, and outputs <code>true</code> if the numbers are in increasing order (equal neighbors are okay), or <code>false</code> otherwise.
            </p>
            <p><img class="indent" src="/bjc-r/img/hof/increasing-list-true-report.png" alt="increasing of (1 3 4 10) returning true">
              <br>
              <img class="indent" src="/bjc-r/img/hof/increasing-list-false-report.png" alt="increasing of (1 7 4 10) returning false">
            </p>
            <p>(The question mark at the end of the name is a convention for predicates â€” blocks that answer yes-or-no questions. &quot;Is this list increasing?&quot;)</p>
        </div>

        <p>
            Because this is a predicate, it's tempting to try to make it use <code>keep</code>:
        </p>
        <img class= "indent" border="0" src="/bjc-r/img/list/hof/wannabe-increasing.png"
        alt="report <empty? (keep items such that (<() < (???)>) from (list)"
        title="report <empty? (keep items such that (<() < (???)>) from (list)"/>

        <p>
            But <code>map</code>, <code>keep</code>, and <code>combine</code> work when each item in a list
            can be considered independently of the others.
            In this problem we have to
            consider each item <b>in relation to</b> the ones that have come before it:
            "<i>Is this number at least as big as the ones we've already seen?</i>"

        </p>
        <p>
            To do this, we need to write a loop.
            The loop needs to go through the lists items, from left to right, and keep track of the last item that
            it saw.
            But, as with <code>map</code>, we don't need to keep track of
            the specific number of where we are in the list (e.g., the third position, the first position, etc.)
            Those index numbers have nothing to do with the problem we're trying to solve.
            The solution is to use the <code>for each item</code> block, this way:
        </p>

        <img class="indent" border="0" src="/bjc-r/img/list/hof/increasing.png" alt="definition of INCREASING? block" title="definition of INCREASING? block"/>
        <p>
            Like the functions used as input to <code>map</code> and friends,
            the script inside the C-shaped slot of <code>for each item</code>
            interprets empty input slots (in the <code>&lt;</code> and <code>set</code> blocks)
            as placeholders into which an item of the list will be entered.
            <code>For each item</code> promises to go through the list starting with item <code>1</code> and continuing in sequence to the end of the list. We use a script variable <code>minimum</code> to remember the most recent item's value, which is the
            minimum allowable value for the next item. If any item is smaller than that
            remembered value, <code>increasing?</code> reports <code>false</code>.
            If we make it to the end of the list without violating that requirement,
            then <code>increasing?</code> reports <code>true</code>.
        </p>
        <p>
            Note that the <code>for each item</code> block has the word &quot;item&quot;
            in a round orange block. It's a variable, and you can drag it into the script
            that goes inside the C-slot, instead of using an empty input to
            represent the list item:
        </p>
        <img class="indent" src="/bjc-r/img/list/hof/increasing-item.png" alt="for each using item variable">



        <p>You can work with the above script <a class="run" href="/bjc-r/prog/loop/increasing.xml">here</a>.</p>

        <h2>Try these</h2>

        <p class="step">
            <b>Try this:</b>
            Display a longish list using time instead of space on the screen
            by <img class="inline" src="/bjc-r/img/blocks/say-fragment.png" alt="say">ing each item for two seconds.

        </p>
        <p class="step">
 -->
 
 	<div class="takeItFurther">
    	<ol start="3">
        	<li>Write an <code>expand</code> reporter that takes a sentence as input, and reports a sentence that's the same except that each number in the input is replaced by that many copies of the following word:<br>
            <img border="0" src="/bjc-r/img/3-lists/expand_output.png"
            alt="she loves you 3 yeah -> she loves you yeah yeah yeah"
            title="she loves you 3 yeah -> she loves you yeah yeah yeah"/></li>
            </ol>
            </div>

      
    </body>
</html>
