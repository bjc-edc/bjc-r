<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 3 Lab 4: Combining List Operations, Page 2</title>
		<script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();}</script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
    </head>

    <body>
        <img class="imageRight" src="/bjc-r/img/icons/teachers-choice.es.png" alt="Teacher's Choice" title="Teacher's Choice" />
    	<h2>Tic Tac Toe (Teacher's Choice)</h2>
    	<div class="todo">FROM:<a href="http://snap.berkeley.edu/snapsource/snap.html#present:Username=MrZG&ProjectName=U0301_ListsPrez">Zeph Grunschlag in NY</a>: "Your goal is to make a much more elegant version of the Tic Tac Toe board drawer that uses functions instead of duplicate blocks. Please notice link to "complicated" program. You don't need to re-drag all the blocks (see the link to a pre-written Snap! program). BONUS: If you can make your program especially short (script blocs + function blocks in total) I'll give you extra credit."</div>
        <div class="todo">From Observation Notes Analysis: U3L4: "We should add a Connect Four project to the curriculum, as an extension / optional project."</div>

		<p><a href="/bjc-r/cur/programming/3-lists/1-abstraction/old/3-abstraction-developing-a-board-game.es.html">In Unit 2</a>, you developed the beginnings of several board games and specialized it to play Tic Tac Toe. Now you'll extend that project to keep track of theTic Tac Toe moves and recognize when someone wins. Later, you'll be able to teach the machine to play, too. </p>
		<p><img class="indent" data-gifffer="/bjc-r/img/3-lists/TicTacToe-video.gif"  alt="Tic Tac Toe video"></p>

		<div class="forYouToDo">
			<ol>
                <li>Open your project <strong>U2L4-TicTacToe</strong> and save it as <strong>U3L4-TicTacToe</strong>. That preserves the old version while you modify it here. Play the game, checking to make sure the sprite <em>centers</em> itself in each cell (tile) before stamping itself, as the animation  shows.</li>
                <li>Players can see which cells  are used but the program doesn't keep track, so players can move  into  cells that are already  taken. Give your program  a variable <img class="inline" src="/bjc-r/img/3-lists/current-game-variable.es.png" alt="current game variable" title="current game variable" /> that will become a list of moves. At the start of the game, this list must be initialized empty. </li>
				<li>
                    A <strong>move</strong> lists  the player (<strong>x</strong> or <strong>o</strong>) and the  cell (1 through 9) that the player moved to.
                    <ol>
                        <li>Build a constructor <img class="inline" src="/bjc-r/img/3-lists/current-move-constructor.es.png" alt="the move by player: () to cell number: () reporter" title="the move by player: () to cell number: () reporter" /> that takes the two inputs and reports the list of those two.
                            <ul>
                                <li>
                                    You can determine the player from the costume number. Make a reporter <img src="/bjc-r/img/3-lists/justplayer.es.png" alt="player () reporter" title="player () reporter" /> that translates a costume number (1 or 2) into a player's symbol (<strong>x</strong> or <strong>o</strong>). You can use it like this:<br />
                                    <img class="indent" src="/bjc-r/img/3-lists/player(costumeNumber).es.png" alt="player (costume #) reporting x" title="player (costume #) reporting x" />
                                </li>
                                <li>You can use <code>which cell? </code> to find the cell number.</li>
                            </ul>
                        </li>
                        <li>
                            Build two selectors:
                            <ul>
                                <li><img class="inline" src="/bjc-r/img/3-lists/player-from-move-selector.es.png" alt="player from move {} selector" title="player from move {} selector" />  takes a move (a list like <code>{x, 5}</code>) as input and reports only the player (e.g., x).</li>
                                <li><img class="inline" src="/bjc-r/img/3-lists/cell-number-from-move.es.png" alt="cell number from move {} selector" title="cell number from move {} selector" />  takes a move as input and reports only the cell number (e.g., 5).</li>
                            </ul>
                        </li>
                    </ol>
                </li>
                <li>Modify the <code>when I am dropped</code> script so that it adds each move to <code>current game</code>. Start a new game and make three or four moves to make sure that it works.</li>
                <li>When a player tries to move  into a cell, your program must check the list <code>current game</code> to see if that is a free cell.
               	<ul> <li>Create a <img src="/bjc-r/img/3-lists/legal-move().es.png" alt="free cell?" title="free cell?" /> predicate that takes a cell number as input and  tests it against <em>every move</em> in <code>current game</code>. The <code>free cell?</code> block should use a higher-order function to extract just the cell numbers from <code>current game</code> as a list and find out if that list contains the cell number that was given as input.</li><li> Test <code>free cell?</code> with the numbers of both free and occupied cells.</li></ul></li>
				<li>Now modify the <code>when I am dropped</code> script again so that  a move is allowed only if it's to a free cell.</li>
				<li>Check to make sure your game works the way you want. Save your result.</li>

			</ol>
		</div>

		<p>The next goal would be to create a way for the <em>program</em> to tell if a player's move has resulted in a win. The following instructions suggest one way, but if you want to experiment and come up with your own method, feel free to do that. Then skip down to the last instruction below.</p>

		<div class="ifTime">
			<ol start="8">
                <li>
                    Each winning combination is a list of three cells.
                    <ol>
                        <li>What triples are winning combinations?</li>
                        <li>How many winning combinations are there? </li>
                        <li>
                            Create a reporter that outputs a list of all possible winning combinations of cells. It will look something like this:<br />
                            <img class="indent" src="/bjc-r/img/3-lists/TicTacToe-wins.es.png" alt="TicTacToe wins partial block definition" title="TicTacToe wins partial block definition" />
                        </li>
                    </ol>
                </li>
                <!--<img class="imageRight" src="/bjc-r/img/icons/pair-programming-swap.es.png" alt="Pair Programming Swap" title="Pair Programming Swap" /> -->
                <li>Click  <img src="/bjc-r/img/1-introduction/green-flag_button.es.png" alt="green flag button" title="green flag button" /> to clear your tic-tac-toe board   and initialize (empty out) <code>current game</code>. Play <em>one</em> game, <em>deliberately letting</em> <strong>x</strong> <em> win</em>. </li>
				<li>To  check  for wins, your script will  need to know where the players have moved. Experiment with the following scripts, which report information about the game you just played. In each case, figure out <em>what</em> those results tell you about that game, and figure out <em>how</em> the script generated those results.
<ol>
                        <li>
                        	<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.es.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
                        	<img src="/bjc-r/img/3-lists/item-1-of-current-game.es.png" alt="item (1) of (current game)" title="item (1) of (current game)" />
                        </li>
                        <li><img src="/bjc-r/img/3-lists/Keep-items-such-that(item-1-of-()-equals-x)-from-Current-game.es.png" alt="keep items such that ((player from move {}) = (x)) from (current game)" title="keep items such that ((player from move {}) = (x)) from (current game)" /></li>
                        <li><img src="/bjc-r/img/3-lists/map(item-2-of-())-over-Keep-items-such-that(item-1-of-()-equals-x)-from-Current-game.es.png" alt="map (cell number from move {}) over (kep items such that ((player from move {}) = (x)) from (current game))" title="map (cell number from move {}) over (kep items such that ((player from move {}) = (x)) from (current game))" /></li>
                        <li>
                        	Build reporter blocks <code>player x cells</code> and <code>player o cells</code> that report a list of cells that the players occupy.<br />
                        	<img class="indent" src="/bjc-r/img/3-lists/player-x-locations(reporting-result(6-3-9-4)).es.png" alt="player x cells reporting {1, 5, 9}" title="player x cells reporting {1, 5, 9}" />
                            <img class="indent" src="/bjc-r/img/3-lists/player-o-locations(reporting-result(2-7-5)).es.png" alt="player o cells reporting {2, 6}" title="player o cells reporting {2, 6}" />
                        </li>
                    </ol>
                </li>
                <li>
                	Now that you can determine what cells each player is in, you can figure out whether some subset of those cells is a win.
                      <ol>
                        <li><img src="/bjc-r/img/3-lists/item-1-of-TicTacToe-wins.es.png" alt="item (1) of (TicTacToe wins)" title="item (1) of (TicTacToe wins)" /></li>
                        <li><img src="/bjc-r/img/3-lists/Keep-items-such-that(list(1-2-3))-contains(item-2-of())-from-Current-game.es.png" alt="keep items such that ((list {1, 2, 3}) contains()) from (player x cells)" title="keep items such that ((list {1, 2, 3}) contains()) from (player x cells)" /></li>
                        <li><img src="/bjc-r/img/3-lists/Keep-items-such-that(item-1-of-TicTacToe-wins)-contains(item-2-of())-from-Current.es.png" alt="keep items such that ((item (1) of (TicTacToe wins)) contains ()) from (player x cells)" title="keep items such that ((item (1) of (TicTacToe wins)) contains ()) from (player x cells)" /></li>
					</ol>
				</li>
				<li>
                	Create a predicate block <img src="/bjc-r/img/3-lists/do-(player-x-locations)-satisfy-(item-1-of-TicTacToe-wins).es.png" alt="do {} satisfy {} ?" title="do {} satisfy {} ?" />that  takes a list of a player's cells and <em>one</em> winning combination and reports whether those cells contain all three elements of the winning combination. <strong>One way</strong> to do it could start like this:
                	<img src="/bjc-r/img/3-lists/predicate-block-titled(do-positions-satisfy-winningCombination).es.png" alt="do {cells} satisfy {winning combination}? : (report ((cells) contains (item (1) of (winning combintion))) and ...)" title="do {cells} satisfy {winning combination}? : (report ((cells) contains (item (1) of (winning combintion))) and ...)" />
          </li>
                <li>Test it for three different winning combinations.</li>
                <li>What  does <img src="/bjc-r/img/3-lists/map-(do(player-x-locations)satisfy())-over(TicTacToe-wins).es.png" alt="map (do (player x cells) satisfy {} ?) over (TicTacToe wins)" title="map (do (player x cells) satisfy {} ?) over (TicTacToe wins)" /> report?</li>
                <li>Build a block, <code>win?</code> that takes a player (<strong>x</strong> or <strong>o</strong>) as input and checks to see if that player wins.</li>
                <li>Modify your <code>when I am dropped</code> script so that when a player wins the game, the program <em>notifies</em> the players.</li>
			</ol>
            <div class="takeItFurther">
                <ol type="A">
                    <li>There are many small improvements you could make. For one thing, when a player wins, the sprite could hide itself so that no more moves are allowed. What else might you want to change or improve?</li>
                </ol>
            </div>

		</div>



	</body>
</html>
