<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 3 Lab 2: Contact List, Page 5</title>
	</head>

    <body>
        <div class="todo">Brian, please review the whole page including the TIF. --MF, 7/3/20</div>
        <h2>Transforming Every List Item</h2>
        <div class="learn">
        	<p>
                <strong>On this page,</strong> you will use the <code>map</code> block to create an <code>initials from name</code> block and then use <code>map</code> together with <code>initials from name</code> to find the initials of all of your contacts.
            </p>
        </div>
        
        <div class="dialogue">
            <div class="stagedir">
                Alphie, Betsy, and Gamal are building an <code>initials from name</code> block that accepts one contact as input and reports that person's initials.<br />
                <img class="indent" src="/bjc-r/img/3-lists/initials-reporting.png" alt="initials from name (name from contact( (item (1) of (contact list)) reporting 'BA'" title="initials from name (name from contact( (item (1) of (contact list)) reporting 'BA'" />
            </div>
            <div>
                <span>Betsy:</span> I used the <img class="inline" src="/bjc-r/img/blocks/split-by.png" alt="split () by ('pink dot indicating a space character')" title="split () by ('pink dot indicating a space character')" /> block to break up the contact's full name into a list of their names, and then I joined the first letter of each name:<br />
                <img class="indent" src="/bjc-r/img/3-lists/initials-definition.png" alt="initials from contact: (contact) {
    script variables (list of names)
    set (list of names) to (split (name from contact (contact)) by (word))
    report (join (letter (1) of (item (1) of (list of names))) (letter (1) of (item (2) of (list of names))) )
}" title="initials from contact: (contact) {
    script variables (list of names)
    set (list of names) to (split (name from contact (contact)) by (word))
    report (join (letter (1) of (item (1) of (list of names))) (letter (1) of (item (2) of (list of names))) )
}" />
            </div>
            <div><span>Alphie:</span> But what about someone who goes by three names like Martin Luther King? It would just report "ML" for him.</div>
            <div><span>Gamal:</span> Oh, that's because the block only takes the first letter of items 1 and 2. We have to add in <code>letter (1) of (item (3) of (list of names))</code>. </div>
            <div><span>Betsy:</span> But what if someone has more names than that? In my aunt's family they each have five or six names...</div>
            <div><span>Gamal:</span> Well, then we need to take <code>letter (1) of</code> <em>every</em> item in the <var>list of names</var>. That sounds like a <em>higher order function</em>. We need to apply the <code>letter (1) of</code> function to every item in the list.</div>
            <div class="vocabFullWidth">
                <p>A <strong>higher order function</strong> is a function that takes a function as input (or reports a function as output). </p>
            </div>
        </div>
        
        <div class="forYouToDo">
			<ol>
                <li>
                    Build and experiment with these examples of the <code>map</code> function.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/map-join-s.png" alt="map (join( )(s)) over (list{block, script, Boolean})" title="map (join( )(s)) over (list{block, script, Boolean})" /><br />
                    <img class="indent" src="/bjc-r/img/3-lists/map-3x.png" alt="map ((3) * ( )) over (list{7, 8, 1})" title="map ((3) * ( )) over (list{7, 8, 1})"  /><br />
                    <img class="indent" src="/bjc-r/img/3-lists/map-letter-1.png" alt="map (letter (1) of ( )) over (list{bounce, join, clear})" title="map (letter (1) of ( )) over (list{bounce, join, clear})" />
                </li>
                <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Discuss and then explain in writing what these expressions are doing.</li>
            </ol>
        </div>
                
        <p>
            The <img class="inline" src="/bjc-r/img/blocks/map-new.png" alt="map 'reporter input slot' over 'list input slot'" title="map 'reporter input slot' over 'list input slot'" /> block takes two inputs: a function (a reporter with a blank input slot) and a list, and it reports a new list where every item is the result of calling the function with an item from the original list as input. For example:<br />
            <img class="indent" src="/bjc-r/img/3-lists/map-example-2.png" alt="map (join( )(s)) over (list {cat, dog, bird}) reporting {cats, dogs, birds}" title="map (join( )(s)) over (list {cat, dog, bird}) reporting {cats, dogs, birds}" /><br />
            <img class="indent" src="/bjc-r/img/3-lists/map-example-3.png" alt="map (round ( )) over (list{3.14159, 87, 5.4}) reporting {3, 87, 5}" title="map (round ( )) over (list{3.14159, 87, 5.4}) reporting {3, 87, 5}" />
		</p>
		
		<div class="takeNote">
            <p><strong>You choose the function that describes the change, and <code>map</code> applies that function to each item in the input list and then reports the list of changed values.</strong></p>
            <p><code>Map</code> is a higher order function just like <code>keep</code> and <code>combine</code>. The function mapped over the list always has a blank input slot. This is where the list item goes each time the function is performed.</p>
            <div class="endnote">
                <p>
                    <a href="#hint-hofs-review" data-toggle="collapse" title="Here is a quick review of higher order functions.">Here is a quick review of the higher order functions <code>map</code>, <code>keep</code>, <code>combine</code>.</a>
                    <div id="hint-hofs-review" class="collapse">
                        <ul>
                            <li>
                                <code>Map</code> performs a function on every item of a list and reports the list of changed items.<br />
                                <img class="indent" src="/bjc-r/img/3-lists/map-example-1.png" alt="map (( )-(1)) over (list (96) (-100) (4.7)) reporting" title="map (( )-(1)) over (list (96) (-100) (4.7)) reporting" />
                            </li>
                            <li>
                                <code>Keep</code> uses a predicate function (a true/false question) to check every item in a list and reports the items that make the predicate true. (You learned about <code>keep</code> on <a href="/bjc-r/cur/programming/2-complexity/3-predicates/5-keeping-list-items.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 2 Lab 3 Page 5: Keeping Items from a List">Unit 2 Lab 3 Page 5: <code>Keep</code>ing Items from a List</a>.)<br />
                                <img class="indent" src="/bjc-r/img/3-lists/keep-items-(last-letter-h)-reporting.png" alt="keep-items-such-that-(last-letter-of-(input)-equals-h)-from-test-list"><br />
                            </li>
                            <li>
                                <code>Combine</code> uses a combining function (a function with two inputs) to report the results of combining all the items in a list using that function. (You learned about <code>combine</code> on  <a href="/bjc-r/cur/programming/2-complexity/4-making-computers-do-math/3-other-math-reporters.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 2 Lab 4 Page 3: More Mathematical Reporters">Unit 2 Lab 4 Page 3: More Mathematical Reporters</a>.)<br />
                                <img class="indent" src="/bjc-r/img/3-lists/combine-simple-example.png" alt="combine (list {0, 1, 2}) with (()+()) reporting 3" title="combine (list {0, 1, 2}) with (()+()) reporting 3" />
                            </li>
                        </ul>
                    </div>
                </p>
            </div>
        </div>
        <div class="forYouToDo">
			<ol start="3">
				<li>If it isn't open already, open your U3L2-ContactList project.</li>
                <li>
                    Use <code>map</code> and <code>combine</code> together to build an <code>initials from name</code> reporter that takes a name as input and reports that person's initials.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/initials-reporting.png" alt="initials from name (name from contact( (item (1) of (contact list)) reporting 'BA'" title="initials from name (name from contact( (item (1) of (contact list)) reporting 'BA'" />
                    <img class="indent" src="/bjc-r/img/3-lists/initials-reporting-mlk.png" alt="initials from name (Martin Luther King) reporting 'MLK'" title="initials from name (Martin Luther King) reporting 'MLK'" />
                </li>
                <li>Test and debug your <code>initials from name</code> block.</li>
                <li>
                    Create an expression to report a list of the initials of all your contacts.<br />
                    <div class="endnote">
                        <a href="#hint-list-names" data-toggle="collapse" title="Need a hint about reporting the initials of everyone in your contact list?">Need a hint?</a>
                        <div id="hint-list-names" class="collapse">
                            <p>
                                First, create an expression to report a list of the names of all your contacts.<br />
                                <img class="indent" src="/bjc-r/img/3-lists/contact-list-list-view.png" alt="contact list watcher in list view" title="contact list watcher in list view" />
                                <span style="padding-right: 1em; padding-left: 1em; font-size: 36px;">&rightarrow;</span>
                                <img class="" src="/bjc-r/img/3-lists/names.png" alt="list in list view containing three items: Betsy Anderson, Alphie Preston, Gamal Abdel" title="list in list view containing three items: Betsy Anderson, Alphie Preston, Gamal Abdel" />
                            </p>
                        </div>
                    </div>
                    <img class="indent" src="/bjc-r/img/3-lists/contact-list-list-view.png" alt="contact list watcher in list view" title="contact list watcher in list view" />
                    <span style="padding-right: 1em; padding-left: 1em; font-size: 36px;">&rightarrow;</span>
                    <img class="" src="/bjc-r/img/3-lists/initials.png" alt="list in list view containing three items: BA, AP, GA" title="list in list view containing three items: BA, AP, GA" />
                </li>
                <li>
                    <!-- question 1 -->
                    <div class="assessment-data" type="multiplechoice" identifier="mapLetterVsItem" hasinlinefeedback="true" maxchoices="1" responseIdentifier="resp1" shuffle="false">
                        <div class="prompt">
                            Which of the following statements are true about this list?<br />
                            <img class="indent" src="/bjc-r/img/3-lists/words_numbers.png" alt="set (words and numbers) to {rabbit, 5, benefit, is, 34, kite, 2, 305, the, 61}" title="set (words and numbers) to {rabbit, 5, benefit, is, 34, kite, 2, 305, the, 61}" /><br />
                        </div>
            
                        <div class="choice" identifier="c1">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc1.png" alt="map (letter (1) of ()) over (words and numbers)" title="map (letter (1) of ()) over (words and numbers)" /> reports the list {r, 5, b, i, 3, k, 2, 3, t, 6}.
                            </div>
                            <div class="feedback">Correct.</div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc2.png" alt="map (item (1) of ()) over (words and numbers)" title="map (item (1) of ()) over (words and numbers)"> reports the list {rabbit}.
                            </div>
                            <div class="feedback">The blank space in <code>item of</code> expects a list as its input, but <code>map</code> puts a single item from <var>words and numbers</var> into that slot.</div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">Both of the above.</div>
                            <div class="feedback">The input list (<var>words and numbers</var>) contains text strings (not lists) so the blank space in the input function should expect a text string (not a list).</div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">None of the above.</div>
                            <div class="feedback"><code>Map</code> performs the input function over each item in the input list.</div>
                        </div>
                        <div class="responseDeclaration" identifier="resp1">
                            <div class="correctResponse" identifier="c1"></div>
                        </div>
                    </div>
                </li>
				<li>
                    <!-- question 2 -->
                    <div class="assessment-data" type="multiplechoice" identifier="mapLetterVsItem" hasinlinefeedback="true" maxchoices="5" responseIdentifier="resp2" shuffle="false">
                        <div class="prompt">
                            Which of the following statements are true about this list?<br />
                            <img class="indent" src="/bjc-r/img/3-lists/check1capitals.png" alt="set (capitals) to {{Augusta, Maine}, {Boise, Idaho}, {Columbia, South Carolina}, {Des Moines, Iowa}}" title="set (capitals) to {{Augusta, Maine}, {Boise, Idaho}, {Columbia, South Carolina}, {Des Moines, Iowa}}" /><br />
                            Choose <strong>all</strong> that apply.
                            <div class="endnote">
                                <a href="#hint-capital-adt" data-toggle="collapse" title="Why not use an ADT?">Why not use an ADT?</a>
                                <div id="hint-capital-adt" class="collapse">
                                    <p>
                                        The list inside a list shown above makes it clearest to you now as you answer this self-check item what the structure is, but a better way to program something like this would be to use an abstract data type:<br />
                                        <img class="indent" src="/bjc-r/img/3-lists/capitals-adt-reporting.png" alt="state: (Augusta) capital: (Maine)" title="state: (Augusta) capital: (Maine)" />
                                    </p>
                                </div>
                            </div>
                        </div>
            
                        <div class="choice" identifier="c1">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc3.png" alt="map (item (1) of ()) over (capitals)" title="map (item (1) of ()) over (capitals)"> reports the list {Augusta, Boise, Columbia, Des Moines}.
                            </div>
                            <div class="feedback">Correct.</div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc3.png" alt="map (item (1) of ()) over (capitals)" title="map (item (1) of ()) over (capitals)"> reports the list {Augusta, Maine}.
                            </div>
                            <div class="feedback">No. <code>Map</code> performs the input function on <em>each item of the list</em>&mdash;not on the whole list. The expression <code>item (1) of (capitals)</code> (without using <code>map</code> at all) would report the list {Augusta, Maine}.</div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc4.png" alt="map (letter (1) of ()) over (capitals)" title="map (letter (1) of ()) over (capitals)"> reports the list {A, B, C, D}.
                            </div>
                            <div class="feedback">No. You can find the first letter of a word, but not the first letter of a list. The expression <code>map (letter (1) of (item (1) of ( ))) over (capitals)</code> would report the list {A, B, C, D}.</div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc5.png" alt="map (all but first of ()) over (capitals)" title="map (all but first of ()) over (capitals)"> reports the list {Maine, Idaho, South Carolina, Iowa}.
                            </div>
                            <div class="feedback">No. This is a tricky one. What gets reported is actually a list of one-item lists: {{Maine}, {Idaho}, {South Carolina}, {Iowa}}. You might want to try it in Snap<em>!</em>. The expression <code>map (item (2) of ()) over (capitals)</code> would report the list {Maine, Idaho, South Carolina, Iowa}.</div>
                        </div>
                        <div class="choice" identifier="c5">
                            <div class="text">
                                <img border="0" src="/bjc-r/img/3-lists/check2mapc5.png" alt="map (all but first of ()) over (capitals)" title="map (all but first of ()) over (capitals)"> reports the list {{Boise, Idaho}, {Columbia, South Carolina}, {Des Moines, Iowa}}.
                            </div>
                            <div class="feedback">No. <code>Map</code> performs the input function on <em>each item of the list</em>&mdash;not on the whole list. The expression <code>all but first of (capitals)</code> (without using <code>map</code> at all) would report the list of lists {{Boise, Idaho}, {Columbia, South Carolina}, {Des Moines, Iowa}}.</div>
                        </div>
                        
                        <div class="responseDeclaration" identifier="resp2">
                            <div class="correctResponse" identifier="c1"></div>
                        </div>
                    </div>
                </li>                
                <li>
                    Read the two scripts below; they do the same thing. <img class="inline" src="/bjc-r/img/icons/write-out-thoughts.png" alt="Write Out Your Thoughts" title="Write Out Your Thoughts" /> Give two reasons why the use of abstraction in the second example is preferred.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/abstraction-example-for-each.png" alt="script variables (names of contacts), set (names of contacts) to (list), for each (contact) of (contacts list): (add (name from contact: (contact)) to (names of contacts)), report (names of contacts)" title="script variables (names of contacts), set (names of contacts) to (list), for each (contact) of (contacts list): (add (name from contact: (contact)) to (names of contacts)), report (names of contacts)" />
                    <img class="indent" src="/bjc-r/img/3-lists/abstraction-example-map.png" alt="map (name from contact: ()) over (contacts list)" title="map (name from contact: ()) over (contacts list)" />
                </li>
			</ol>
		</div>
    
    <div class="todo">Brian, I redid this with ADTs. Also, this data makes it look like programmers are poor and also it's better to go into business. :( --MF, 7/3/20</div>


        <div class="takeItFurther">
            <ol type="A">
                <li>
                    Click the picture to load this database project:<br />                
                    <div class="sidenote">Data from <em>Structure and Interpretation of Computer Programs</em> by Abelson and Sussman. Creative Commons licensed.</div>
                    <a class="run" href="/bjc-r/prog/3-lists/U3L2-Employee-Database.xml"><img class="indent" src="/bjc-r/img/3-lists/microshaft-database.png" width="493" height="249" alt="database of name, job, salary"></a><br />
                    This is the list of employees of a small company. Each of the smaller lists contains a person's name, job title, and yearly salary.
                    <p>"This company spends more money on the big bosses than on the people who do the work," says Alyssa one day.  Is she right?  Write an expression to compute the total salaries of everyone paid less than $100,000 per year.  Then find the total for everyone paid more than $100,000 per year.</p>
                </li>   
                <li>Ben suggests that the results will be more convincing in the form of a list containing that total and all the names of the people in that category (paid less than $100,000, for example). So, if there are five people in that category, your list will have six items: first the total of the salaries, and then the names of the people. Try this both for less than $100,000 and for more than $100,000.</li>
                <li>Find the <em>average</em> salary of people paid less than $100,000 per year.</li>
            </ol>
        </div>


	</body>
</html>
