<!DOCTYPE html>
<html lang="en">
    <head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
        <script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();}</script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
		<title>Unit 3 Lab 4: Data Processing, Page 1</title>
    </head>

    <body>
        <h2>Importing and Accessing Data</h2>
        <div class="todo">
            <p>This draft is based on <a href="https://www.youtube.com/watch?v=6H8vK8Q5KeY">Jens's data science video</a>. --MF, 6/7/19</p>
            <p>Brian, I'm definitely going to need some help thinking about how to cover the standards. I think most of DAT-2 goes here with the exception of DAT-2.B, which can go with what's currently 3.5.4. --MF, 6/7/19</p>
        </div>
        <div class="learn"></div>
        <div class="forYouToDo" id="first">
			<ol>
				<li><div class="newProject"><span class="text">"U3L4-Data-Processing"</span><img src="/bjc-r/img/icons/new-project-called.png" alt="Start a New Project called U1L2-Crayon" title="Start a New Project called U3L4-Data-Processing" /></div></li>
                <li>Visit the <a href="https://think.cs.vt.edu/corgis/csv/index.html" title="CORGIS Datasets Project" target="_blank">CORGIS Datasets Project</a> and select a dataset you'd like to explore. Download the CSV file for the data you want to explore.</li>
                <div class="endnote">
                    <a href="#hint-CSV" data-toggle="collapse" title="What is a CSV file?">What is a CSV file?</a>
                    <div id="hint-CSV" class="collapse">
                        CSV stands for "comma separated values." CSV files are tables of data stored with commas between each item in a row and line breaks between each row in the table. (You can see the commas and line breaks if a CSV in a text editor.) If you want to see the data as a table, you can open the CSV file in a spreadsheets application like Google Sheets, Apple Numbers, or Microsoft Excel. Or you can process the data in Snap<em>!</em>
                    </div>
                </div>
				<li>Open Snap<em>!</em> and drag the downloaded file into the Snap<em>!</em> window. You should see a table full of data. Look over the data including the <em>column headers</em> (labels) in the top row to give yourself a sense of what kind of information is included. Then click "OK," and drag the new global variable from the Variables palette into the scripting area. This variable contains the data as you can see in the watcher on the Snap<em>!</em> stage.</li>
                <div class="endnote">
                    If you right-click (or control-click on a Mac) the table, you can switch to "list view" and see how the data (and column headers) are stored as a list of lists. <a href="#hint-views" data-toggle="collapse" title="See examples of 'table view' and 'list view.'">See examples of "table view" and "list view."</a>
                    <div id="hint-views" class="collapse">
                        <img class="indent" src="/bjc-r/img/3-lists/cars-table-view.png" alt="report of cars dataset displayed as a table with columns and rows; the first row is the label of each column; the remaining rows each contain the data for a single record" title="report of cars dataset displayed as a table with columns and rows; the first row is the label of each column; the remaining rows each contain the data for a single record" />
                        <img class="indent" src="/bjc-r/img/3-lists/cars-list-view.png" alt="report of cars dataset displayed as a list of lists; the first list contains the labels for each of the columns shown in the table view; the remaining lists each contain the data for a single record" title="report of cars dataset displayed as a list of lists; the first list contains the labels for each of the columns shown in the table view; the remaining lists each contain the data for a single record" />
                    </div>
                </div>
				<li>Experiment with different inputs to the <code>item of</code> block to access different rows in the dataset. <img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> How does the result of <code>item (1) of</code> your data set differ from other input numbers?</li>
			</ol>
		</div>
        <p>Each row in your dataset is one <em>record</em>. For example, a single record might be the data for one student in your school, the data for one earthquake that happened, the data for one hospital in the U.S, or the data for contact in your contact list.</p>
        <div class="endnote">
            <a href="#hint-row" data-toggle="collapse" title="Click for examples of a single row (record) of a dataset.">Click for examples of a single row (record) of a dataset.</a>
            <div id="hint-row" class="collapse">
                <img class="indent" src="/bjc-r/img/3-lists/item-1-of-cars.png" alt="item (1) of (cars) reporting a {City mpg, Classification, Driveline, Engine Type, Fuel Type, Height, ...}" title="item (1) of (cars) reporting a {City mpg, Classification, Driveline, Engine Type, Fuel Type, Height, ...}" />
                <img class="indent" src="/bjc-r/img/3-lists/item-13-of-cars.png" alt="item (13) of (cars) reporting a {17, Automatic transmission, All-wheel drive, Audi 3.2L 6 cylinder 265hp 243 ft-lbs, Gasoline, 147, ...}" title="item (13) of (cars) reporting a {17, Automatic transmission, All-wheel drive, Audi 3.2L 6 cylinder 265hp 243 ft-lbs, Gasoline, 147, ...}" />
            </div>
        </div>
        <p>Each column in your dataset is one piece of data for all of the records in your dataset. For example, it might be the homeroom teacher for every student in your school, the magnitude of every earthquake in the dataset, the owner of every hospital in the U.S., or the phone number of every person in your contact list.</p>
        <div class="endnote">
            <a href="#hint-column" data-toggle="collapse" title="Click for examples of a single column of a dataset.">Click for examples of a single column of a dataset.</a>
            <div id="hint-column" class="collapse">
                <p>Notice that the first item is still the column header (label) for the data in that column.</p>
                <img class="indent" src="/bjc-r/img/3-lists/column-4-of-cars.png" alt="column (4) of (cars) reporting {Engine Type, Audi 3.2L 6..., Audi 2.0L 4..., Audi 2.0L 4..., Audi 2.0L 4..., Audi 2.0L 4..., ...}" title="column (4) of (cars) reporting {Engine Type, Audi 3.2L 6..., Audi 2.0L 4..., Audi 2.0L 4..., Audi 2.0L 4..., Audi 2.0L 4..., ...}" />
                <img class="indent" src="/bjc-r/img/3-lists/column-13-of-cars.png" alt="column (13) of (cars) reporting {Model Year, 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., ...}" title="column (13) of (cars) reporting {Model Year, 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., 2009 Audi A..., ...}" />
            </div>
        </div>
		<div class="forYouToDo">
			<ol start="5">
				<li>
                    <img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Figure out how to report just one column of your dataset.
                    <div class="sidenoteBig">
                        <a href="#hint-map" data-toggle="collapse" title="Try to figure out how to report just one column, but click if you really need a hint.">Try to figure this out, but click if you really need a hint.</a>
                        <div id="hint-map" class="collapse">Use <img class="inline" src="/bjc-r/img/blocks/map.png" alt="map () over ()" title="map () over ()" />. <code>Map</code> performs the same function to every item in a list. Since a table is a list of lists (where each inner list is one record), it will perform the same function to every record in your dataset. You will need to determine what function to map over the dataset. You learned about <code>map</code> on <a href="/bjc-r/cur/programming/3-lists/1-introduction-to-lists/4-mapping-over-list.html?topic=nyc_bjc%2F3-lists.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 3 Lab 1 Page 4: Transforming Every List Item">Unit 3 Lab 1 Page 4: Transforming Every List Item</a>.</div>
                    </div>
                </li>
                <div class="todo">TG: Figuring out how to report just one column of a table can be tricky for students. They'll need to map <code>item of</code> over their dataset. For example, <img class="inline" src="/bjc-r/img/3-lists/" alt="map (item (1) over ()) over (cars)" title="map (item (1) over ()) over (cars)" /> reports just the MPG of every car in the CORGIS Cars CSV Library. The <code>map</code> function is simple to understand (e.g, add 3 to every item in the list, or take the fourth item of every record in the table), but it can take time and practice to learn when and how to use it. Encourage students to take that time by talking with their partner, referring back to <a href="/bjc-r/cur/programming/3-lists/1-introduction-to-lists/4-mapping-over-list.html?topic=nyc_bjc%2F3-lists.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 3 Lab 1 Page 4: Transforming Every List Item">Unit 3 Lab 1 Page 4: Transforming Every List Item</a> where they first learned <code>map</code>, and/or talking to other pairs. </div>
                <li>Build <code>row () of table ()</code> and <code>column () of table ()</code> blocks to make it easier to access one row or column.</li>
                <div class="endnote">
                    <p>Notice that these suggested block names include the word "table" before the second input. The column block will only work if the second input is a list of lists, not just a list of values. Look at your code and figure out why. Including the expected input data type in the block name can help you avoid bugs caused by using the wrong kind of input.</p>
                </div>
                <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Determine one question you can ask by <strong>looking at a single column</strong> of your data set, and then build code to answer that question. You may need to build additional blocks or import them from other projects.
                    <div class="endnote">
                        <p>
                            You can see the column number by holding your mouse pointer over the letter at the top of the column in table view.<br />
                            <img class="indent" src="/bjc-r/img/3-lists/column-number.png" alt="image of the top of the table view for the cars dataset with the mouse pointer over the top of the second column; the columns are now labeled A, 2 (where the pointer is), C, D, etc." title="image of the top of the table view for the cars dataset with the mouse pointer over the top of the second column; the columns are now labeled A, 2 (where the pointer is), C, D, etc." />
                        </p>
                        <div class="todo">Need to finish the list inside this hint once the COMBINE block lands. --MF, 6/7/19</div>
                        <p>You may need to use <code>map</code>, <code>keep</code>, or <code>combine</code> to answer your question. <a href="#hint-HOFs" data-toggle="collapse" title="Click to see where you learned about these higher order functions.">Click to see where you learned about these higher order functions.</a></p>
                        <div id="hint-HOFs" class="collapse">
                        <ul>
                            <li>You learned about <code>map</code> on <a href="/bjc-r/cur/programming/3-lists/1-introduction-to-lists/4-mapping-over-list.html?topic=nyc_bjc%2F3-lists.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 3 Lab 1 Page 4: Transforming Every List Item">Unit 3 Lab 1 Page 4: Transforming Every List Item</a>.</li>
                            <li>You learned about <code>keep</code> on <a href="/bjc-r/cur/programming/2-complexity/3-predicates/2-keeping-list-items.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment" title="Unit 2 Lab 3 Page 2: Keeping Items from a List">Unit 2 Lab 3 Page 2: <code>Keep</code>ing Items from a List</a> .</li>
                            <li>You learned about <code>combine</code> on <a href="" title=""></a>.</li>
                        </ul>
                        </div>
                        <p><a href="#hint-questions" data-toggle="collapse" title="Click for example questions to ask.">Click for example questions to ask.</a></p>
                        <div id="hint-questions" class="collapse">
                            <ul>
                                <li>What's the average MPG that cars in this database get in the city? (You'd need an <code>average</code> block.)</li>
                                <li>What's the year of the oldest car in this dataset? (You'd need a <code>minimum</code> block.)</li>
                                <li>How many cars in this dataset have manual transmission? </li>
                            </ul>
                            <p>Notice that all of these examples only require data from one column. If you ask a question that requires looking at another column (for example, "What's the model of the car with the highest MPG?"), that will be harder to answer, though you will learn how to soon.</p>
                        </div>
                    </div>
                </li>
                <div class="todo">TG: After students design and answer their own questions, having them present their questions and solutions to the class will help everyone better appreciate the power of using higher order functions (such as <code>map</code> and <code>keep</code>) to process data and better understand how to use them with a list of lists.</div>
            </ol>
        </div>
        
        

        <div class="todo"><h1>Page break</h1></div>
        
        <h2>Analyzing Data*</h2>
        <div class="todo">This page should be skippable. --MF, 6/7/19</div>
        <div class="learn">
            <p><strong>On this page</strong>, you will ask and answer questions about your dataset and learn new tools.</p>
        </div>
        
        <div class="comment">Jens had <code>round</code> in his example, but I cut it because it's one more thing to try to keep in your head when things are already complex and it doesn't really matter. --MF, 6/7/19</div>
        <p>
            You can also ask questions about a specific subset of your data by <em>filtering</em> the data using <code>keep</code>. For example, "What the average city MPG <em>for just the Subarus</em> in this dataset?"<br />
            <img class="indent" src="/bjc-r/img/3-lists/average-mpg-of-subarus-reporting.png" alt="average of (column (1) of table (keep items such that (item (12) of () = Subaru) from (cars))) reporting 19.49..." title="average of (column (1) of table (keep items such that (item (12) of () = Subaru) from (cars))) reporting 19.49..." /><br />
            <div class="comment">Include a link to wherever U3 math tools ends up for the <code>average</code> block import. --MF, 6/7/19</div>
            Column 12 is the "Make" of the vehicle, so we <code>keep</code> all the items from <var>cars</var> where the 12<sup>th</sup> item is Subaru. Then, we take column 1 of that (the "City MPG") and take the average of those values.
        </p>
        <div class="todo">
            <p>There is a part of me that wants to break this up with a FYTD in which they plan their question, but I think it flows better if we go straight into pipe.--MF, 6/7/19</p>
            <p>
                Another thought: is this the right place to teach <code>pipe</code>? It adds to the overhead. Maybe there is an earlier place where we could teach it? Maybe we could introduce it with some of the U3 tools stuff (see below). Then this second page of data processing could start with the FYTD, and that overhead would have been addressed on an easier page. --MF, 6/7/19<br />
                <img class="indent" src="/bjc-r/img/3-lists/divisors-with-pipe.png" />
            </p>
        </div>
    
        <p>
            Nested functions like that (functions used inside other functions) can be hard to read though, so Snap<em>!</em> offers another way to code with multiple functions. You can use the <code>pipe</code> function from the "Frequency Distribution Analysis" library to work through your data analysis one function at at time:<br />
            <img class="indent" src="/bjc-r/img/3-lists/pipe-cars-reporting.png" alt="pipe () → (keep items such that (item 12 of () = Subaru) from ()) (column (1) of table ()) (average of ()) reporting 19.49..." title="pipe () → (keep items such that (item 12 of () = Subaru) from ()) (column (1) of table ()) (average of ()) reporting 19.49..." /><br />
            The <code>pipe</code> function sends the <var>cars</var> data through <code>keep</code> to filter it for just the Subarus, through <code>column (1) of</code> to get just the "City MPG" for those Subarus, and finally through <code>average</code> to average the MPG values.  
        </p>
        <p>Notice that the empty input slots in each function are filled by the output of the previous function (or the starting dataset in the case of the first function): the empty slots in the <code>keep</code> function are both filled by <var>cars</var>; the empty slot in <code>column (1) of table</code> is filled by the output of <code>keep</code>; and the empty slot in <code>average</code> is filled by the output of <code>column (1) of table</code>. It's like a pipe of made of pieces connected together; the data goes in one end and works through each function changing as it goes.</p>
        
        <div class="forYouToDo">
			<ol>
				<li>Open your U3L4-Data-Processing project if it isn't open already.</li>
                <li>Load the "Frequency Distribution Analysis" from the Libraries... option in the Snap<em>!</em> File menu (<img src="/bjc-r/img/1-introduction/file_button.png" style="height:1.6em;" alt="File button" title="File button"/>).</li>
				<li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Determine one question you can ask by <strong>looking at <em>just a portion of</em> a single column</strong> of your data set, and then build code to answer that question. You can nest your function or use <code>pipe</code>. (Or try both!)</li>
				<div class="endnote">
                    <a href="#hint-target" data-toggle="collapse" title="">Unfinished hint about example questions.</a>
                    <div id="hint-target" class="collapse">Hint stuff here... It's hidden until you click the toggle.</div>
                </div>
			</ol>
		</div>
    
        <div class="todo">These ITIT and TIF problems are not yet built. Jens gets tough quickly, and I love it, but I'm not sure how far we want to take this. I'm actually wondering about offering the kids the video as part of the TIF (the teachers should definitely see it). I'm not actually sure of any of this ITIT and TIF should be on the student page. --MF, 6/7/19</div>
        <div class="ifTime">
			<ol start="4">
				<li><code>group</code> (ITIT because it's not essential but the basics are accessible)</li>
			</ol>
		</div>
    
        <div class="takeItFurther">
            <ol type="A">
				<li><code>sort</code> (TIF because it's hard to understand how/why to set up the predicate</li>
                <li>constructing new list a.k.a. inserting a column with <code>map</code> (TIF because this is complicated to think about)</li>
            </ol>
        </div>
    
        <p>
            You can also... For example, with and without pipe...<br />
            <img class="indent" src="/bjc-r/img/3-lists/plot-cars-histogram.png" alt="" title="" />
            <img class="indent" src="/bjc-r/img/3-lists/plot-cars-histogram-with-pipe.png" alt="" title="" /><br />
            Tada...<br />
            <img class="indent" src="/bjc-r/img/3-lists/cars-histogram-reporting.png" alt="" title="" />
            <img class="indent" src="/bjc-r/img/3-lists/plot-cars-histogram-stage.png" alt="" title="" />
        </p>
    
        <div class="forYouToDo">
			<ol start="5">
				<li><code>histogram</code> and <code>plot</code></li>
			</ol>
		</div>


    </body>
</html>
