<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 3 Lab 1: Contact List, Page 2</title>
	</head>

	<body>
		<h2>Creating the Name ADT</h2>
		<div class="learn">
			<p><strong>On this page,</strong> you will develop an <strong>Abstract Data Type</strong> to store and access <em>name data</em> (first-name, last-name, etc.).</p>
        </div>

        <div class="dialogue">
            <div><span>Betsy:</span> Right now, our program uses <em>one</em> text string to hold each contact's name, but people have multiple names.</div>
            <div><span>Gamal:</span> We can just put both names in together.</div>
            <div>                <span>Betsy:</span> Let's look at the list on your phone.<br />
                <img src="/bjc-r/img/3-lists/contacts.png" height="150" alt="list of names"><br />
				Ah, they're sorted by last name, even though it's not the beginning of the name text.
</div>
            <div><span>Gamal:</span> Hmmm... What if we used another list to separate the last name from the first name?</div>
            <div><span>Betsy:</span> OK. So, we could make a <code>name</code> ADT and two new selectors: one to report the name they way it appears for the user: first-name last-name; and one to report the name so we can sort it: last-name comma first-name.</div>
        </div>
        
        <div class="forYouToDo" id="first">
			<ol>
				<div class="sidenote">
                    You could paste this text into the "Make a block" window:<br />
                    <code>name, first: %first last: %last</code>
                </div>
                <li>
                    Develop a <code>name</code> constructor. It should accept a <var>first name</var> and <var>last name</var> as input and report the whole name as a list:<br />
                    <img class="indent" src="/bjc-r/img/3-lists/name-constructor-reporting.png" alt="name, first: (Barack) last: (Obama) reporting {Barack, Obama}" title="name, first: (Barack) last: (Obama) reporting {Barack, Obama}" />
                </li>
                <li>
                    <div class="sidenote"><code>display-form from name: %name</code></div>
                    <div class="sidenote"><code>sorting-form from name: %name</code></div>
                    Create two new selectors to distinguish between the two orders by using <code>join</code>. Test them with your <code>name</code> constructor.<br />
					<img class="indent" src="/bjc-r/img/3-lists/name-display-result.png" alt="display-form from name: (name, first (Barack) Last: (Obama)) reporting {Barack Obama}" title="display-form from name: (name, first (Barack) Last: (Obama)) reporting {Barack Obama}"><br />
                    <img class="indent" src="/bjc-r/img/3-lists/name-sorting-result.png" alt="sorting-form from name: (name, first (Barack) Last: (Obama)) reporting {Obama, Barack}" title="sorting-form from name: (name, first (Barack) Last: (Obama)) reporting {Obama, Barack}"><br />
Give the selectors expected input types to make it obvious that they each expect a list (one whole name) as input.</li>
                <li>
                	<strong>Analyze and Debug.</strong> Betsy and Gamal tried to use their <code>display-form from name</code> block together with their <code>contact</code> constructor. They were their code to report "Anderson, Betsy", but it didn't work. <img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> What's going wrong? What should they do instead?<br />
                    <img class="indent" src="/bjc-r/img/3-lists/name-sorting-contact-result.png" alt="sorting-form from name: (contact name: (Betsy) address: (123 Main St. NY, NY 10001) phone: (212-555-1234)) reporting Betsy Anderson 123 Main St., New York, NY 10001" title="sorting-form from name: (contact name: (Betsy) address: (123 Main St. NY, NY 10001) phone: (212-555-1234)) reporting Betsy Anderson 123 Main St., New York, NY 10001" />
                </li>
                <li>
                    Make the <var>name</var> input slot of your <code>contact</code> constructor expect a list item, as shown here:<br />
                    <img class="indent" src="/bjc-r/img/3-lists/contact-constructor-name-typed.png" alt="contact name: () address: () phone: ()" title="contact name: () address: () phone: ()" />
                </li>
                <li>
                	Clear your list (reset it to an empty list), and add a few contacts using the <code>name</code> constructor.<br />
                    <img class="indent" src="/bjc-r/img/3-lists/contact-constructor-with-name-constructor.png" alt="contact name: (name, first: (Betsy) last: (Anderson)) address: (123 Main St. NY, NY 10001) phone: (212-555-1234)" title="contact name: (name, first: (Betsy) last: (Anderson)) address: (123 Main St. NY, NY 10001) phone: (212-555-1234)" />
                </li>
                <li>
                    <strong>Debug any problems.</strong> The contacts in your <var>contact list</var> should each have a list as the first name, like this:<br />
                    <img class="indent" src="/bjc-r/img/3-lists/contact-list-list-view-name-list.png" alt="contact list watcher in list view showing contact with name as list" title="contact list watcher in list view showing contact with name as list" />
                </li>
			</ol>
		</div>
        
        <div class="ifTime">
			<img class="imageRight" src="/bjc-r/img/3-lists/contact-list-with-name-and-address-types.png" alt="contact list with one contact showing: {{Betsy, Anderson}, {123 Main St., New York, NY, 10001}, 212-555-1234}" title="contact list with one contact showing: {{Betsy, Anderson}, {123 Main St., New York, NY, 10001}, 212-555-1234}" />
			<ol start="8">
				<li>
                	Develop an abstract data type (ADT) to store and access <em>address data</em>.
                    <ol>
                        <li>
                            Create an ADT to manage four data points for each address: <var>street address</var>, <var>city</var>, <var>state</var>, and <var>zip</var>. You will need:
                            <ul>
                                <li>One <code>address</code> constructor</li>
                                <li>Four selectors: <code>street address from address</code>, <code>city from address</code>, <code>state from address</code>, and <code>zip from address</code>.</li>
                            </ul>
                        </li>
                        <li>Make the <var>address</var> input slot of your <code>contact</code> constructor expect a list item.</li>
                        <li>Clear your list, add several contacts using your <code>name</code> and <code>address</code> constructors, and try selecting specific data (such as the city) from a <code>contact</code>.</li>
                        <li><strong>Debug</strong> any problems.</li>				   
                    </ol>
                </li>
			</ol>
            <br clear="all">
		</div>	
        
        
        
        <hr /><hr />
        
        <h2>Contact List Data: Names</h2>
        <div class="learn">
            <strong>On this page</strong>, you will focus on the perhaps-surprising complexity of handling a contact's name.
        </div>
        
        <p>Unlike, for example, a video game or an art project, a contact list app is all about <strong>data</strong>. In this lab as a whole, you'll create a <code>contact</code> abstract data type, with components such as <code>name</code>, <code>address</code>, <code>phone</code>, <code>birthday</code>, and so on, much as in <a href="/bjc-r/cur/programming/2-complexity/2-data-structures-art/2-data-types.html">Unit 2</a> you created a <code>point</code> ADT. But in this case, each component of a <code>contact</code> will itself be an ADT. On this page you'll start with names.</p>
        
        <div class="dialogue">
            <div><span>Alphie:</span> Hmm, that paragraph above says that <code>name</code> has to be an ADT, but I don't see why.  Isn't a name just a text string?  "Alphie North."  "Betsy 
            Davies." "Sir James Paul McCartney."</div>
            <div>
                <span>Betsy:</span> Let's look at the list on your phone.<br />
                <img src="/bjc-r/img/3-lists/contacts.png" height="150" alt="list of names"><br />
				Ah, they're sorted by last name, even though it's not the beginning of the name text.
            </div>
            <div>
                <span>Alphie:</span> So are you saying we should have a <code>name</code> data type made out of a 
                <code>first name</code> and a <code>last name</code>? Then it'd look just like what we did for <code>point</code>:<br />
                <img src="/bjc-r/img/3-lists/point.png" alt="point = list" title="point = list"/>&nbsp;&nbsp;&nbsp;&nbsp;<img src="/bjc-r/img/3-lists/simple-name.png" alt="name, first: (first) last: (last):  report (list first last)">
            </div>
            <div class="stagedir">Some other students start looking over their shoulders.</div>
            <div><span>Mei:</span> Do you want your app to work in China?  People there put their family name first, so Sun Yìxiān is in the Sun family, and would be in the S part of your name list, not the Y part.</div>
            <div><span>Alphie:</span> So, you're saying we need two different <code>name</code> types, with different constructors and selectors?</div>
            <div><span>Gamal:</span> At least two.  After you finish your program, I'll tell you about names in Iceland (given name first, but sorted on given name, not family name) and Myanmar (no family name at all)!</div>
            <div class="stagedir">Alphie puts his head in his hands and groans.</div>
            <div><span>Betsy:</span> Nah, it doesn't have to be that bad.  We'll just have one <code>name</code> type, but it'll have <em>variants,</em> and we'll include a <em>type tag</em> in with the given and family parts to indicate <strong>given-first</strong> (as in the US) or <strong>family-first</strong> (as in China). Gamal can add more variants later if he wants.</div>
        </div>
        
        <div class="forYouToDo" id="first">
            <ol>
                <li>
                    Make this block:<br />
                    <img src="/bjc-r/img/3-lists/typed-name.png" alt="name, type: ( ) given: ( ) family: ( ):  report (list type given family)">
                </li>
                <li>
                    There are only two allowable values for the <var>type</var> input, and you won't want users of your program to have to remember them and type them in without spelling errors.  Instead, you want a <em>menu</em> input, like this:<br />
                    <img src="/bjc-r/img/3-lists/dropdown-block.png" alt="name block with menu input slot for type"><br />
                    Here's how to do that:
                    <ol type="a">
                        <li>Edit the <code>name</code> block and click on the orange <var>type</var> variable in its header.</li>
                        <li>
                            Click on the arrowhead to open the type selector, then right-click on it:<br />
                            <img src="/bjc-r/img/3-lists/option-context-menu.png" height="460" alt="option context menu in input dialog"><br />
                            Then click "options..."
                        </li>
                        <li>
                            Enter the type tags in the box, one per line:<br />
                            <img src="/bjc-r/img/3-lists/option-dialog.png" height="460" alt="menu options "given-first" and "family-first"">
                        </li>
                        <li>
                            Click OK, then right-click the type selector again and choose "read-only."
                            <div class="narrower">
                                There are two kinds of menu input slots:<br />&nbsp;&nbsp;
                                <img src="/bjc-r/img/3-lists/dropdown-item.png" alt="item (...) non-read-only menu input slot"><br />
                                <img src="/bjc-r/img/3-lists/dropdown-touching.png" alt="touching (...) ?  read-only input slot"><br />
                                For this block, we don't want users to enter values other than the ones in the menu.
                            </div>
                        </li>
                        <li>CLick OK on the <var>type</var> input box and then on the Block Editor.</li>
                    </ol>
                </li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div><span>Alphie:</span> Okay, now I guess we have to make selectors, right?</div>
            <img src="/bjc-r/img/3-lists/name-type.png" alt="name type (name): report item 1 of (name)"> <img src="/bjc-r/img/3-lists/given-name.png" alt="given name (name): report item 2 of (name)"> <img src="/bjc-r/img/3-lists/family-name.png" alt="family name (name):  report item 3 (name)">
            <div><span>Gamal:</span> Don't call the first one <code>name type</code>.  We're going to need the same type selector for other ADTs also, so call it <code>type tag</code>.</div>
            <div><span>Alphie:</span> How do you know?</div>
            <div><span>Gamal:</span> I read ahead in the curriculum!</div>
            <div class="stagedir">Alphie and Betsy groan.</div>
        </div>
        
        <div class="forYouToDo">
            <ol start="3">
            	<li>Make the three selectors, using Gamal's suggested name for the first one.</li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div><span>Betsy:</span> But I'm not sure how this variant idea is going to help.  Mostly, the rest of the program isn't going to want the family name alone.  It's going to want the <em>entire</em> name, either in display order or in sorting order, so aren't we going to need blocks like <img src="/bjc-r/img/3-lists/given-first-name-sorted-order.png" alt="given first name in sorted form (name)"> and so on?</div>
            <div><span>Alphie:</span> Oh, hang on, you're thinking of it as a selector just for one variant (given-first names), but we can simplify a bit by thinking of it as a selector for <em>all</em> names, <img src="/bjc-r/img/3-lists/name-sorted-block.png" alt="name (sorted form) ( )">.  The definition is a little more complicated, but the rest of the program will be able to use it without caring what kind of variant it has.</div>
        </div>
        
        <div class="forYouToDo">
            <ol start="4">
                <li>
                    Finish this definition:<br />
                    <img src="/bjc-r/img/3-lists/name-sorted-defn.png" alt="name (sorted form) (name):  if ((type tag (name)) = [given-first]) report (join (family name (name)) [, ] (given name (name)))"><br >
                    Note that for a given-first name we put a comma and space between the names, "Davies, Betsy"; there won't be a comma for family-first names ("Sun Yìxiān").
                </li>
                <li>Similarly, define <img src="/bjc-r/img/3-lists/name-display.png" alt="name (display form) ( )">.</li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div>
                <span>Betsy:</span> Oh, I see!  Now in the rest of the program we can just say things like<br />
                <img src="/bjc-r/img/3-lists/foreach-say-name.png" alt="for each (contact) of (contact list)  say (name (display form) (contact name (contact))) for 2 secs">
            </div>
            <div>
                <span>Alphie:</span> It's even better than that!  This is where the magic comes in.  When we make the Contact ADT, we give it a type tag too:<br />
                <img src="/bjc-r/img/3-lists/contact-with-tag.png" alt="contact, name: (name) address: (address) phone: (phone):   report (list [contact] (name) (address) (phone))"><br />
                Then, since contacts have type tags, we can make <em>the same selector blocks</em> work for them, too:<br />
                <img src="/bjc-r/img/3-lists/display-name-object.png" width="729" height="421" alt="name (display form) (object):  if ... if ((type tag (object)) = contact) report (name (display form) (contact name (object))) ..."><br />
                Ta da!  Now your code is just<br />
                <img src="/bjc-r/img/3-lists/foreach-display-contact.png" alt="for each (contact) of (contact list)  say (name (display form) (contact)) for 2 secs">
            </div>
        </div>


	</body>
</html>