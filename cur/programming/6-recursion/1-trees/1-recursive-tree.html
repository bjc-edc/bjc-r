<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 6 Lab 1: Trees in a Forest, Page 1</title>
	</head>

	<body>
		<h2>Recursive Tree</h2>	
        <p>
            Our goal is to draw a tree with <strong>fractal</strong> structure. Notice that the final picture contains smaller versions of itself...<br />
            <div class="sidenoteBig">A <strong>fractal</strong> is a repeating pattern made up of copies (or slight variations) of the same shape.</div>
            <img class="indent noshadow" src="/bjc-r/img/6-recursion/recursive-tree.gif" alt="fractal tree" title="fractal tree" /><br />
            You will build your fractal tree using <em>blocks within blocks</em> to create the branches that are each smaller copies of the same tree.
        </p>

        <div class="forYouToDo" id="first">
            <ol>	
                <div class="newProject">	<span class="text">"U6L1-Tree"</span><img src="/bjc-r/img/icons/new-project-called.png" alt="Start a New Project called U6L1-Tree" title="Start a New Project called U6L1-Tree" /></div>
                <li>
                    Build the first level.
                    <ol>
                        <li>
                            Build this <code>tree1</code> block: <br />
                            <img class="indent" src="/bjc-r/img/6-recursion/tree1.png" alt="tree level 1 script" title="tree level 1 script" />
                        </li>
                        <li>                    
                        	Point the sprite up, put the pen down, and run <code>tree1 size: 50</code>. You should get a result like this: <br />
							<img class="indent" src="/bjc-r/img/6-recursion/tree-level1.png" alt="tree level 1 result" title="tree level 1 result" />
                    	</li>
                        <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner-mini.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Where does your sprite start? Where does it stop? <strong>Why?</strong></li>
                    </ol>
                </li>
                <li> 
                    Now, build the second level.
                    <ol>
                    	<li>
                        	Build <code>tree2</code>, which uses <code>tree1</code> to create the branches:<br />
                    		<div class="sidenote">Using <code>tree1</code> to draw the branches in <code>tree2</code> is using <em>abstraction</em>.</div>
                            <img class="indent" src="/bjc-r/img/6-recursion/tree2.png" alt="tree level 2 script" title="tree level 2 script" />
                        </li>
                        <li>
                        	With the sprite pointing up and the pen down, run <code>tree2 size: 50</code>. You should get a result like this:<br />
                        	<img class="indent" src="/bjc-r/img/6-recursion/tree-level2.jpg" alt="tree level 2 result" title="tree level 2 result" />
                        </li>
                        <li>
                        	<img class="imageRight" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
                            Trace through the code carefully. Describe the role of each block in producing the drawing.
                        </li>
						<li>Why is where the sprite stops for <code>tree1</code> important to <code>tree2</code>?</li>
                    </ol>
                </li>
            </ol>
        </div>
		
        <div class="takeNote"><strong>State transparency</strong> (changing only what you need to and nothing else) is important when using blocks within blocks. Usually, this means returning the sprite to the same position and direction as it started.</div>
        
        <div class="forYouToDo">
            <ol start="3">
                <div class="endnote">
                	Right-click (or control-click on a mac) a block to "duplicate" or "relabel" blocks to make these tasks much faster.<br />
                    <p class="center"><img src="/bjc-r/img/6-recursion/dup-and-relabel.gif" alt="duplicate and relabel menu options" title="duplicate and relabel menu options" /></p>
                </div>
                <li>Make a <code>tree3</code> block that uses the <code>tree2</code> block.</li>
                <li>Make a <code>tree4</code> block that uses the <code>tree3</code> block.</li>
                <li>
                    Make a <code>tree5</code> block that uses the <code>tree4</code> block. Running <code>tree5 size: 50</code> should produce a result like this:<br />
                    <img class="indent" src="/bjc-r/img/6-recursion/tree5.jpg" alt="tree5 size: 50" title="tree5 size: 50" /> 
                </li>
            </ol>
    	</div>
        
		
        <p><img class="inline" src="/bjc-r/img/icons/take-turns-speaking-mini.gif" alt="Take turns speaking" title="Take turns speaking"> These blocks look very similar, and we can actually write a <code>tree</code> block that uses <code>tree</code> itself in its own script.</p>
        <div class="takeNote center">Using a block inside of itself is a special kind of abstraction called <strong>recursion</strong>.</div>
        <p>In addition to the <var>size</var> of the tree, the <em>recursive</em> <code>tree</code> block will need to know the <var>level</var> of the tree you want to draw. For example, given a <var>level</var> input of 5, <code>tree</code> will call two trees of <var>level</var> 4; those two trees will each call two more trees of <var>level</var> 3, and so on. (This is just like how <code>tree5</code> called <code>tree4</code>, and <code>tree4</code> called <code>tree3</code>, and so on.)</p>


		<div class="forYouToDo">
            <ol start="6">
                <li>
                    Build the <em>recursive</em> version of the <code>tree</code> block:<br />
            		<img class="indent" src="/bjc-r/img/6-recursion/tree-nobase.png" alt="buggy tree block definition" title="buggy tree block definition" />
                </li>
                <li>
                	Point the sprite up, put the pen down, and run <code>tree level: 9 size: 50</code>. It will <em>not</em> work, like this: <br />
					<img class="indent" src="/bjc-r/img/6-recursion/treebug.gif" alt="picture of failing tree">
                </li>
                <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Try to debug the script. What's going wrong?</li>
            </ol>
        </div>                    
        
        <p>
        	The sprite draws smaller and smaller left branches (until it ends up looking like it's just spinning around in one place) without ever drawing a right branch. The problem is that the original numbered blocks <em>aren't </em>all the same. The first one, <code>tree1</code>, is different; it just draws a trunk, without any branches.<br />
            <img class="indent" src="/bjc-r/img/6-recursion/tree1.png" alt="tree1 script" />
			<img class="indent" src="/bjc-r/img/6-recursion/tree-level1.png" alt="tree level 1 result" title="tree level 1 result" />
        </p>
        <div class="sidenote">Recall, <em>recursive</em> means a script that calls itself.</div>
        <p>So our recursive <code>tree</code> block has to do something different when the <var>level</var> is 1.</p>
        <div class="takeNote"><p class="center">This different version for the lowest level of a recursive script is called the <strong>base case</strong>.</p></div>
        
        <div class="forYouToDo">
            <ol start="9">
                <li>
                    Correct your recursive <code>tree</code> block so that it includes a base case to stop the script from calling itself forever:<br />
        			<img class="indent" src="/bjc-r/img/6-recursion/tree.png" alt="correct tree block definition" title="correct tree block definition" />
                </li>
                <li>
                	Point the sprite up, put the pen down, and run <code>tree level: 9 size: 50</code>. Now it  should work, and you should get a result like this:<br />
					<img class="indent" src="/bjc-r/img/6-recursion/tree9.png" alt="picture of tree on stage" />
                </li>
                <li>The amount of time required to draw the tree goes up very quickly with the number of levels, so we don't recommend trying 20 levels. Try running level 8 through level 12 at various sizes.</li>
			</ol>
        </div>
        
        <div class="takeNote">
        	<img class="imageRight" src="/bjc-r/img/icons/take-turns-speaking-mini.gif" alt="Take turns speaking" title="Take turns speaking">
            <p><em>Recursive</em> scripts call themselves, but they can't keep doing it forever; they have to stop and go back at some point. That point is the <strong>base case</strong>, the simpler version of the script that <em>doesn't call the block itself</em>. This is typical in recursion.</p>
            <p>There is usually a <em>conditional statement</em> (like <code>if-else</code>) with two cases: a <em>base case</em> for the lowest level that stops the recursion from going on forever and a <strong>recursive case</strong> that calls itself again and again.</p>
            <p>When a script <em>does</em> keep recursively calling itself forever (like when the sprite was just spinning around in one place), that's a bug, and we say it is stuck in an <strong>infinite loop</strong>.</p>
        </div>
        
        <div class="forYouToDo">
            <ol start="11">
                <li>Look at your corrected recursive <code>tree</code> script. Identify the <em>base case</em> and the <em>recursive case</em>, and discuss how recursion works in this script. </li>
            </ol>
        </div>
        
        <div class="takeItFurther"><a name="further" class="anchor">&nbsp;</a>
            <ol type="A">
                <li>
                    Try using a <var>count</var> variable to record the number of times that the <code>tree</code> block is called when running different levels. Make a table. Do you see a pattern?
                    <table class="center bordered">
                        <tr>
                            <td><var>level</var></td>
                            <td><var>count</var></td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>?</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>etc.</td>
                            <td>etc.</td>
                        </tr>
                    </table>
                    This is an example of exponential growth. This kind of growth for an algorithm is considered to take <a href="/bjc-r/cur/programming/5-algorithms/3-timing-experiments/4-classifying-reporters.html?topic=nyc_bjc%2F5-algorithms.topic&course=bjc4nyc_2015-2016.html&novideo&noassignment"><em>unreasonable time</em></a>. This is why we suggested against trying 20 levels. It will take way too long. 
                </li>
            </ol>
        </div>
        

	</body>
</html>