<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<script type="text/javascript" src="/bjc-r/utilities/gifffer.min.js"></script>
        <script type="text/javascript">window.onload = function() {Gifffer();}</script>
        <link rel="stylesheet" type="text/css" href="/bjc-r/css/bjc-gifffer.css">
		<title>Unit 2 Lab 3: Making Decisions by Using Predicates, Page 2</title>
	</head>

	<body>
		<h2><code>Keep</code>ing Items from a List</h2>
		<div class="learn">
			<p><strong>On this page</strong>, you will use predicates with the <code>keep</code> block to keep items in a list that have specific characteristics.</p>
		</div>

		<p>As you know, predicates can be used with conditionals to decide when to <em>do</em> something; they can also be used with <code>keep</code> to decide which things to <em>keep</em>. The <img class="inline" src="/bjc-r/img/blocks/keep.png" alt="keep" title="keep" /> block takes a list and a predicate <!--with a <em>blank input slot</em> (shown below)--> as input, and it reports a new list keeping only the items from the list that make the condition described by the predicate true.</p>
		
        <p>
            For example, the following expression will find words from the <var>words list</var> <strong>whose first letter is v</strong>. The <em>blank input slot</em> is where each item of the list goes to decide if it will be kept.<br>
			<img class="indent" src="/bjc-r/img/2-complexity/keep-example-6.png" alt="keep items such that ((letter(1) of ( )) = (v)) from (word list)" title="keep items such that ((letter(1) of ( )) = (v)) from (word list)">
            <!--<img class="indent" src="/bjc-r/img/2-complexity/does-have-6-letters-and-letter-5-is-g.png" alt="(does () have (6) letters?) and (letter (5) of () is (g)?)" title="(does () have (6) letters?) and (letter (5) of () is (g)?)" />-->
		</p>
        
        <div class="takeNote">
            <p>You write the predicate that does the checking, and <strong><code>keep</code> applies the predicate to each item in the input list and then reports the list of items that make your predicate <code>true</code></strong>.</p>
			<p>Note that the blank input slot in the predicate is <em>required</em> when using <code>keep</code>. This is where the item from the list goes each time the question is asked.</p>
		</div>
        
        <div class="forYouToDo" id="first">
			<ol>
                <li><a href="/bjc-r/cur/programming/2-complexity/1-variables-games/4-importing-exporting.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment">Export</a> your new predicates (<code>between?</code>, <code>divisible?</code>, <code>even?</code>, and perhaps also <code>integer?</code>) from <a href="/bjc-r/cur/programming/2-complexity/3-predicates/1-adding-questions.html?topic=nyc_bjc%2F2-conditionals-abstraction.topic&course=bjc4nyc.html&novideo&noassignment">your U2L3-Predicates project</a>, then load <a class="run" href="/bjc-r/prog/2-complexity/U2L3-KeepingData.xml" target="_blank">this starter project</a>, import your predicates, and save the new project.</li>
                <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Experiment with these examples of <code>keep</code>. Discuss and then explain <em>in writing</em> what these expressions are doing.<br />
                    <img class="indent" src="/bjc-r/img/2-complexity/keep-example-4.png" alt="keep items such that ((length of ( )) = (5)) from {apple, banana, orange, grape, kiwi, mango, watermelon} reporting {apple, grape, mango}" title="keep items such that ((length of ( )) = (5)) from {apple, banana, orange, grape, kiwi, mango, watermelon} reporting {apple, grape, mango}"><br />
                    <img class="indent" src="/bjc-r/img/2-complexity/keep-example-7.png" alt="keep items such that (not(is () a (number)?)) from {5, :), six, 7, elephant, 3} reporting {5,7,3}" title="keep items such that (is () a (number)?) from {5, :), six, 7, elephant, 3} reporting {5,7,3}">
                </li>
                
				<!--<p>
					Here, every word in the list is asked whether the first letter is <var>a</var>:<br />
					<img class="indent" src="/bjc-r/img/aprilpd/keep-example-4.png" alt="keep items such that ((letter (1) of ()) = (a)) from {Ann, Olivia, Jamal, Karl, A.J., Tara} reporting {Ann, A.J.}" title="keep items such that ((letter (1) of ()) = (a)) from {Ann, Olivia, Jamal, Karl, A.J., Tara} reporting {Ann, A.J.}" />
				</p>-->
				
				<div class="endnote">
                    <img class="imageRight" src="/bjc-r/img/icons/import-tools-mini.png" alt="Import Tools" title="Import Tools" />
                    Like <a href="/bjc-r/cur/programming/1-introduction/3-drawing/6-the-for-block.html?topic=nyc_bjc%2F1-intro-loops.topic&course=bjc4nyc.html&novideo&noassignment">the <code>for</code> block</a>, <code>keep</code> isn't installed automatically. It has already been added to this project, but in other projects, you'll need to select "Import tools" from the File menu to access the <code>keep</code> block. <br />
                </div>  
            </ol>
		</div>
        
        <p>The first example keeps inputs of a certain <em>length</em>; every word in the list is asked whether its length is 5, and only those with five letters are reported. The second example keeps inputs that are <em>not numbers</em>; every item in this list is asked "Is this item <em>not</em> a number?" and only the elements that are not numbers are reported.</p>
        
        <div class="forYouToDo">
			<ol start="3">
        		
		  <li>
					Run <code>initialize lists</code>, and then use your new predicates together with <code>keep</code> to answer these questions:
                    <ol>
						<li>How many 12-letter words are in <var>words list</var>?</li>
						<li>How many 15-letter words are in <var>words list</var>?</li>
						<li>How many 17-letter words are in <var>words list</var>?</li>
						<li>
							How many items in the <var>numbers list</var> are:
							<ol style="list-style-type: lower-roman">
								<li>Even?</li>
								<li>Between 25 and 75?</li>
								<li>Even numbers that are greater than zero?</li>
							</ol>
						</li>
                    </ol>
                </li>
            </ol>
        </div>
        
        <div class="ifTime">
			<ol start="4">
				<li>
					If you created an <code>integer?</code> predicate, use your new predicates together with <code>keep</code> to determine how many numbers in the <var>numbers list</var> are:
                    <ol>
                        <li>Integers?</li>
                   		<li>Integers between 25 and 75?</li>
                        <li>Not integers?</li>
						<li>Odd integers?</li>
                    </ol>
                </li>				   
			</ol>
		</div>
        
        <hr /><hr />
        
        <h2>Contact List Data: Names</h2>
        <div class="learn">
            <strong>On this page</strong>, you will focus on the perhaps-surprising complexity of handling a contact's name.
        </div>
        
        <p>Unlike, for example, a video game or an art project, a contact list app is all about <strong>data</strong>. In this lab as a whole, you'll create a <code>contact</code> abstract data type, with components such as <code>name</code>, <code>address</code>, <code>phone</code>, <code>birthday</code>, and so on, much as in <a href="/bjc-r/cur/programming/2-complexity/2-data-structures-art/2-data-types.html">Unit 2</a> you created a <code>point</code> ADT. But in this case, each component of a <code>contact</code> will itself be an ADT. On this page you'll start with names.</p>
        
        <div class="dialogue">
            <div><span>Alphie:</span> Hmm, that paragraph above says that <code>name</code> has to be an ADT, but I don't see why.  Isn't a name just a text string?  "Alphie North."  "Betsy 
            Davies." "Sir James Paul McCartney."</div>
            <div>
                <span>Betsy:</span> Let's look at the list on your phone.<br />
                <img src="/bjc-r/img/3-lists/contacts.png" height="150" alt="list of names"><br />
				Ah, they're sorted by last name, even though it's not the beginning of the name text.
            </div>
            <div>
                <span>Alphie:</span> So are you saying we should have a <code>name</code> data type made out of a 
                <code>first name</code> and a <code>last name</code>? Then it'd look just like what we did for <code>point</code>:<br />
                <img src="/bjc-r/img/3-lists/point.png" alt="point = list" title="point = list"/>&nbsp;&nbsp;&nbsp;&nbsp;<img src="/bjc-r/img/3-lists/simple-name.png" alt="name, first: (first) last: (last):  report (list first last)">
            </div>
            <div class="stagedir">Some other students start looking over their shoulders.</div>
            <div><span>Mei:</span> Do you want your app to work in China?  People there put their family name first, so Sun Yìxiān is in the Sun family, and would be in the S part of your name list, not the Y part.</div>
            <div><span>Alphie:</span> So, you're saying we need two different <code>name</code> types, with different constructors and selectors?</div>
            <div><span>Gamal:</span> At least two.  After you finish your program, I'll tell you about names in Iceland (given name first, but sorted on given name, not family name) and Myanmar (no family name at all)!</div>
            <div class="stagedir">Alphie puts his head in his hands and groans.</div>
            <div><span>Betsy:</span> Nah, it doesn't have to be that bad.  We'll just have one <code>name</code> type, but it'll have <em>variants,</em> and we'll include a <em>type tag</em> in with the given and family parts to indicate <strong>given-first</strong> (as in the US) or <strong>family-first</strong> (as in China). Gamal can add more variants later if he wants.</div>
        </div>
        
        <div class="forYouToDo" id="first">
            <ol>
                <li>
                    Make this block:<br />
                    <img src="/bjc-r/img/3-lists/typed-name.png" alt="name, type: ( ) given: ( ) family: ( ):  report (list type given family)">
                </li>
                <li>
                    There are only two allowable values for the <var>type</var> input, and you won't want users of your program to have to remember them and type them in without spelling errors.  Instead, you want a <em>menu</em> input, like this:<br />
                    <img src="/bjc-r/img/3-lists/dropdown-block.png" alt="name block with menu input slot for type"><br />
                    Here's how to do that:
                    <ol type="a">
                        <li>Edit the <code>name</code> block and click on the orange <var>type</var> variable in its header.</li>
                        <li>
                            Click on the arrowhead to open the type selector, then right-click on it:<br />
                            <img src="/bjc-r/img/3-lists/option-context-menu.png" height="460" alt="option context menu in input dialog"><br />
                            Then click "options..."
                        </li>
                        <li>
                            Enter the type tags in the box, one per line:<br />
                            <img src="/bjc-r/img/3-lists/option-dialog.png" height="460" alt="menu options "given-first" and "family-first"">
                        </li>
                        <li>
                            Click OK, then right-click the type selector again and choose "read-only."
                            <div class="narrower">
                                There are two kinds of menu input slots:<br />&nbsp;&nbsp;
                                <img src="/bjc-r/img/3-lists/dropdown-item.png" alt="item (...) non-read-only menu input slot"><br />
                                <img src="/bjc-r/img/3-lists/dropdown-touching.png" alt="touching (...) ?  read-only input slot"><br />
                                For this block, we don't want users to enter values other than the ones in the menu.
                            </div>
                        </li>
                        <li>CLick OK on the <var>type</var> input box and then on the Block Editor.</li>
                    </ol>
                </li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div><span>Alphie:</span> Okay, now I guess we have to make selectors, right?</div>
            <img src="/bjc-r/img/3-lists/name-type.png" alt="name type (name): report item 1 of (name)"> <img src="/bjc-r/img/3-lists/given-name.png" alt="given name (name): report item 2 of (name)"> <img src="/bjc-r/img/3-lists/family-name.png" alt="family name (name):  report item 3 (name)">
            <div><span>Gamal:</span> Don't call the first one <code>name type</code>.  We're going to need the same type selector for other ADTs also, so call it <code>type tag</code>.</div>
            <div><span>Alphie:</span> How do you know?</div>
            <div><span>Gamal:</span> I read ahead in the curriculum!</div>
            <div class="stagedir">Alphie and Betsy groan.</div>
        </div>
        
        <div class="forYouToDo">
            <ol start="3">
            	<li>Make the three selectors, using Gamal's suggested name for the first one.</li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div><span>Betsy:</span> But I'm not sure how this variant idea is going to help.  Mostly, the rest of the program isn't going to want the family name alone.  It's going to want the <em>entire</em> name, either in display order or in sorting order, so aren't we going to need blocks like <img src="/bjc-r/img/3-lists/given-first-name-sorted-order.png" alt="given first name in sorted form (name)"> and so on?</div>
            <div><span>Alphie:</span> Oh, hang on, you're thinking of it as a selector just for one variant (given-first names), but we can simplify a bit by thinking of it as a selector for <em>all</em> names, <img src="/bjc-r/img/3-lists/name-sorted-block.png" alt="name (sorted form) ( )">.  The definition is a little more complicated, but the rest of the program will be able to use it without caring what kind of variant it has.</div>
        </div>
        
        <div class="forYouToDo">
            <ol start="4">
                <li>
                    Finish this definition:<br />
                    <img src="/bjc-r/img/3-lists/name-sorted-defn.png" alt="name (sorted form) (name):  if ((type tag (name)) = [given-first]) report (join (family name (name)) [, ] (given name (name)))"><br >
                    Note that for a given-first name we put a comma and space between the names, "Davies, Betsy"; there won't be a comma for family-first names ("Sun Yìxiān").
                </li>
                <li>Similarly, define <img src="/bjc-r/img/3-lists/name-display.png" alt="name (display form) ( )">.</li>
            </ol>
        </div>
        
        <div class="dialogue">
            <div>
                <span>Betsy:</span> Oh, I see!  Now in the rest of the program we can just say things like<br />
                <img src="/bjc-r/img/3-lists/foreach-say-name.png" alt="for each (contact) of (contact list)  say (name (display form) (contact name (contact))) for 2 secs">
            </div>
            <div>
                <span>Alphie:</span> It's even better than that!  This is where the magic comes in.  When we make the Contact ADT, we give it a type tag too:<br />
                <img src="/bjc-r/img/3-lists/contact-with-tag.png" alt="contact, name: (name) address: (address) phone: (phone):   report (list [contact] (name) (address) (phone))"><br />
                Then, since contacts have type tags, we can make <em>the same selector blocks</em> work for them, too:<br />
                <img src="/bjc-r/img/3-lists/display-name-object.png" width="729" height="421" alt="name (display form) (object):  if ... if ((type tag (object)) = contact) report (name (display form) (contact name (object))) ..."><br />
                Ta da!  Now your code is just<br />
                <img src="/bjc-r/img/3-lists/foreach-display-contact.png" alt="for each (contact) of (contact list)  say (name (display form) (contact)) for 2 secs">
            </div>
        </div>
              

	</body>
</html>