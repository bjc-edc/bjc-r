<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 4 Lab 1: Web Data and Communication Protocols</title>
    </head>
    
    <body>
        <h2>The Network of Networks: IP</h2>
        <div class="todo">
        	Here are the EKs I expect will be covered on this page. Please mark with <em>italics</em> those that have definitely been covered and mark with <strong>bold</strong> those that will definitely not be covered here. Thanks, Mary
            <ul>
                <li><strong>EK6.1.1B</strong> An end-to-end architectures facilitates connecting new devices and networks on the Internet.</li>
                <li><strong>EK6.1.1C</strong> Devices and networks that make up the Internet are connected and communicate using addresses and protocols.</li>
                <li><strong>EK6.1.1D</strong> The Internet and the systems built on it facilitate collaboration.</li>
                <li><strong>EK6.1.1E</strong> Connecting new devices to the Internet is enabled by assignment of an Internet protocol (IP) address.</li>
                <li><strong>EK6.1.1F</strong> The Internet is built on evolving standards, including those for addresses and names.</li>
                <li><strong>EK6.1.1G</strong> The domain name system (DNS) translates names to IP addresses.</li>
                <li><strong>EK6.1.1H</strong> The number of devices that could use an IP address has grown so fast that a new protocol (IPv6) has been established to handle routing of many more devices.</li>
                <li><strong>EK6.2.1A</strong> The Internet and the systems built on it are hierarchical and redundant.</li>
                <li><strong>EK6.2.1C</strong> IP addresses are hierarchical.</li>
                <li><strong>EK6.2.2A</strong> Hierarchy and redundancy help systems scale.</li>
                <li><strong>EK6.2.2B</strong> The redundancy of routing (i.e., more than one way to route data) between two points on the Internet increases the reliability of the Internet and helps it scale to more devices and more people.</li>
                <li><strong>EK6.2.2D</strong> Interfaces and protocols enable widespread use of the Internet.</li>
                <li><strong>EK6.2.2E</strong> Open standards fuel the growth of the Internet.</li>
                <li><strong>EK6.2.2G</strong> Standards for packets and routing include transmission control protocol/Internet protocol (TCP/IP).</li>
                <li><strong>EK6.2.2J</strong> The bandwidth of a system is a measure of bit rate â€“ the amount of data (measured in bits) that can be sent in a fixed amount of time.</li>
            </ul>
        </div>
        
        <div class="commentBig">I didn't know that! Wow. Can we say a bit more here about what the difference is? It's weird to just tease with the idea and not explain the difference... --MF</div>
        <p>Many people talk as if "the Internet" and "the World Wide Web" were the same thing. But the Internet is much more general, and you're going to look at how it's organized.</p>
        <div class="forYouToDo" id="first">
            <ol>
	            <li>
                    Watch this video from code.org:<br />
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/5o8CwafCxnU?list=PLzdnOPI1iJNfMRZm5DDxco3UdsFegvuB7" frameborder="0" allowfullscreen class="indent"></iframe>
                </li>
                <li>If you don't already have it open, load <a class="run" href="/bjc-r/prog/4-internet/http-block.xml">this project</a> with the <code>http</code> and <code>proxied http</code> blocks.</li>
            </ol>
        </div>


        <div class="sidenoteBig"><strong>"IP"</strong> stands for <strong>Internet Protocol</strong>, which you'll learn more about later.</div>
        <p>Every computer on the Internet (including smartphones, internet-enabled appliances, etc.) has an address, like a postal or email address, called its <strong>IP address</strong>. You can find out your computer's IP address by asking a search engine:<br /><center><a href="https://duckduckgo.com/?q=my+ip+address" target="new">https://duckduckgo.com/?q=my+ip+address</a></center><br />
        <div class="endnote"><strong>What's DuckDuckGo?</strong>  It's a search engine, like Google or Bing, except that it doesn't track your searches to sell you to advertisers as the others do. You learned about it in <a href="http://localhost/bjc-r/cur/programming/3-lists/5-search-internet/getting-started.html?topic=nyc_bjc%2F3-lists.topic&course=bjc4nyc_2015-2016.html&novideo&noassignment">Unit 3</a>.</div>


        <div class="forYouToDo">
            <ol start="2">
                <li>Write a Snap<em>!</em> reporter <img src="/bjc-r/img/4-internet/my-ip-addr.png" alt="my IP address"> in the Sensing palette that scrapes your IP address from the above link.  (If you're lucky, it'll come right after the phrase "Your IP address is," but if you're unlucky there will be HTML tags to strip out. Use the View Source command to find out.) Remember to use <img src="/bjc-r/img/4-internet/proxied-http.png" alt="proxied http">.
                </li>  
                
                <li><strong>Discuss:</strong>  How does DuckDuckGo know your IP address?  Why do web sites <em>need</em> to know your IP address?</li>
                    <div class="todo">
                      <p>How would a student answer these questions? Should this be in the TG with some support? I don't know how to answer these questions... --MF</p>
                      <p>PG: problems here <img src="/bjc-r/img/4-internet/duckduck-ip-address-fail.png" alt="failure"></p>
                </div>
            </ol>
        </div>
        
        <p>What it means for a computer to be "on the Internet" is that it has an IP address that other computers can find.</p>
        
        <div class="takeNote">
            The Internet is probably the largest and most complicated artifact in human history.  It is a monument to two big ideas:
            <ul>
                <li><strong>Cooperation.</strong> Just think: You can send email to someone in a country that's considered an enemy of your country (from the US to Iran, for example).  An engineer at Microsoft can read a web page at Apple.  Your T-Mobile cell phone can talk to your friend's Verizon phone.  Despite some governments' attempts to censor the net, the big picture is one of strong cooperative spirit. (Don't let anyone tell you that only competition leads to progress.)</li>
                <li>
                	<strong>Abstraction.</strong> There are billions of devices connected to the Internet, and hundreds of <em>kinds</em> of devices: laptops, tablets, phones, refrigerators, handheld credit card readers that the waiter brings to your table at the restaurant, and so on.  How do they all know how to talk to each other?  The Internet was designed with several levels of abstraction.  Here's an only slightly simplified picture:<br />
                    <center>
                        <table border="2" cellpadding="6" summary="hardware, device driver software, Internet Protocol, Transmission Control Protocol, application protocols.">
                            <caption><center>Internet abstraction hierarchy</center></caption>
                            <tr>
                                <td>&nbsp;&nbsp;application protocols</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Transmission Control Protocol (TCP)&nbsp;&nbsp;</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;Internet Protocol (IP)</td>
                            </tr>
                            <tr>
                                <td>&nbsp;&nbsp;network interface hardware</td>
                            </tr>
                        </table>
                    </center>
                    <div class="sidenote">In some parts of the country the word "route" is pronounced like "root"; in other parts it's pronounced to rhyme with "doubt."  Nevertheless, engineers everywhere pronounce "router" like "doubter."</div><br clear="all"/>
                    <hr />
                    <div class="todo">I think these three paragraphs could be cut back dramatically. --MF</div>
                    <p>Read this table from the bottom (least abstract) to the top (most abstract).  We won't have much to say about the bottom  level.  Your computer connects to the net through some kind of interface.  If it's a big desktop computer, it might have an <strong>Ethernet</strong> interface attached to a socket on the side or back of the computer, looking like a telephone jack but wider.  A laptop computer might have an Ethernet adaptor, but more likely has a <strong>WiFi</strong> interface attached to an antenna inside the case, connecting to your network <strong>router</strong> box by radio.  Your cell phone uses a longer-range <strong>cellular</strong> connetion to your phone carrier.</p>
                    <div class="comment"><p>Figure out how to do arp -a from inside Snap<em>!</em> to show who's on your local net, without having to install software or get root.</p><p>I have no idea what this means. Please clarify. --MF</p></div>
                    <p>Your network interface connects you to a small <strong>local network</strong>.  If your connection is by Ethernet (physical cable), the local network is all the machines that are cabled together, typically all in one or two rooms.  If the computers in your lab are permanently installed, the odds are they're on an Ethernet.  If you're on a laptop, your local network consists of all the machines with WiFi connections to the same router, also typically very near each other.</p>
                    <p>Somewhere on your local network is a device that's <em>also</em> connected to <em>another</em> network.  That other network isn't "the Internet"; it's a somewhat larger network, but still pretty small.  Maybe there's one such network for your entire school.  The <strong>routers</strong> are the machines that are connected to two or more networks, your local one and some wider area ones.  It's a "router" because its job is to route incoming messages to the particular local computer to which each message is addressed.  It also knows how to forward outgoing messages to the best available larger network.</p>
                    <hr />
                    <div class="todo">I think these could be trimmed down and moved to the top of the page. --MF</div>
                    <p>So, does your message finally get onto a super-huge network called "the Internet"?  No; all of the networks together, even the local net in your house, make up the Internet.  It's called "<strong>Internet</strong>" because it's a <em>network of networks</em>.</p>
                    <p>The network hardware interface attached to your computer only knows how to send messages to other computers on your local network.  When you ask for a web site on the other side of the world, as far as the hardware is concerned, you're just sending your request to your local router.  The router has to forward your message to <em>its</em> router, and so on, until you reach a router that's on <em>several</em> large networks and has to figure out which one is best for the next step in getting your request to its final destination.  The rules by which routers know how to do that are the <strong>Internet Protocol.</strong>  It's the abstraction that lets you imagine you're on a single huge network with all of the other computers in the world.</p>
                    <hr />
                </li>
            </ul>
        </div>
        
       
        <div class="forYouToDo">
            <ol start="3">
                <div class="todo">Do we really need this traceroute stuff at all? --MF</div>
                <li>Click the link for <a href="http://www.usc.edu/cgi-bin/traceroute?choice=yes" target="new">http://www.usc.edu/cgi-bin/traceroute?choice=yes</a>.  What you see is a list of how a message gets to your computer from the University of Southern California (USC).  Here's an example, showing the route to the computer in Massachusetts on which I'm writing this:
                <pre>
traceroute to 108.26.181.226 (108.26.181.226), 30 hops max, 40 byte packets
3  rtr30-rtr33-fw26-fw27-gw-30.mgmt.usc.edu (10.1.133.2)  4.006 ms  1.732 ms *
4  v255-gw-6 (128.125.251.149)  3.336 ms  8.617 ms  1.714 ms
5  fw6-rtr6 (128.125.255.147)  1.054 ms  1.137 ms  1.286 ms
6  rtr-border-cal-fw6 (128.125.251.226)  2.146 ms  1.802 ms  2.158 ms
7  ln-usc1-pwaveusc2042.ln.net (130.152.182.81)  1.705 ms  1.593 ms  2.007 ms
8  d3-0-1-2.a05.nycmny01.us.ra.gin.ntt.net (165.254.21.241)  2.878 ms  2.322 ms  2.374 ms
9  ae-0.verizonbusiness.lsanca03.us.bb.gin.ntt.net (129.250.8.86)  1.700 ms  2.878 ms  1.913 ms
10  xe-8-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.119)  77.289 ms xe-7-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.117)  75.497 ms xe-8-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.119)  77.045 ms
11  * * *
12  * * *
13  *
                </pre>
                The lines numbered 3-6 are routers (notice "rtr" in most of their names) belonging to USC.  Line 7 is interesting; it is registered to an organization named "Los Nettos" (that's the "ln" in its name), but its official representative has a USC email address.
                <div class="takeItFurther"> How do I know that?  Do a web search for "whois" to find out.</div>
                <p>Line 8 is also interesting.  Its name ends with "ntt.net," which means that it belongs to NTT Communications in Tokyo, Japan!  But that doesn't mean our message went through Japan; this specific router is located in Englewood, Colorado.</p>
                <div class="takeItFurther"> How do I know that?  Do a web search for "geolocation" to find out.</div>
                <p>Line 9 is another ntt.net router, but this one is in Los Angeles.  My message has gone from California to Colorado and then back to California!  (Note that the router's name includes "lsanca"&mdash;Los Angeles, California.</p>
                <div class="todo">PG: I could reproduce very little of this. When I searched whois, I got a list of sites, the first of which never loaded. (As a kid, I won't know why, or whether I'm supposed to wait, or I did something wrong.) When I tried another, I tried looking up ln, which gave me something but not an answer that fit with what is said about "interesting" line 7. By then, I wasn't interested to try more. Googling geolocation gives me a bunch of thingsâ€”Wikipedia, Mozilla, etc.â€”and nothing that (easily) tells me more. Not that everything needs to be easy, but the double whammy of having a list of places to look and little readable in each place I do look damps my motivation. And, alas, I never find out what geolocation is. What part of this is the essential part?  How can we get to it more easily? OR, better question, how can we tell the interesting parts of decoding the traceroute with experiments a random kid could reliably perform? <p>Finally, I tried giganews. It tells us something to note, and recommends we "use the server that gives the best performance." What can I <em>do</em> with that information?  What does it <em>mean</em>?  Parts of this could be elucidating for <em>us</em>, but I think it would be nearly totally obscure for kidsâ€”too much unknown in the first place, and too deeply encoded to read even the parts one might know. </p>
                <p>This might be a place to note what "30 hops max, 60 byte packets" is trying to tell us, and what the interspersed ip addresses and ms reports are saying (kids probably don't know what ms means nor do numbers like 216.166.98.3 yet feel "recognizable" as <em>having</em> a meaning as "oh, that's a device." But it feels to me like <em>so</em> many unknowns to get throughâ€”what's a hop, what is <em>max</em>, what's a byte, what's a packet, what does that all tell me, what's ms, what are all the other words like 10gigabitethernet2-2.core1.ash1.he.net, which are slightly explained but all still newâ€”to make sense of.</p>
                </div>
                <p>On line 10, the message passes from NTT to Verizon, my Internet Service Provider.  I'm not sure where the router is actually located; one geolocation service tells me it's in Los Angeles, but another says it's in Missouri.</p>
                <p>After that, the asterisks on lines 11-13 mean that the routers aren't responding to traceroute messages, so we don't know the exact path once the message is inside the Verizon network.</p></li>
                <li>Try <a href="http://www.slac.stanford.edu/cgi-bin/nph-traceroute.pl?choice=yes" target="new">http://www.slac.stanford.edu/cgi-bin/nph-traceroute.pl?choice=yes</a>, which is a traceroute server at Stanford University, also in California.  See what you can deduce about that route; at what point does it start looking like the route from USC?</li>
                <li>
                    Here are some more to try:
                    <ul>
                        <li><a href="http://www.giganews.com/line_info.html" target="new">http://www.giganews.com/line_info.html</a>.</li>
                        <li><a href="http://vger.kernel.org/cgi-bin/nph-traceroute?ASQ=on&OWN=on&MODE=ICMP&DOMAIN=" target="new">http://vger.kernel.org/cgi-bin/nph-traceroute?ASQ=on&amp;OWN=on&amp;MODE=ICMP&amp;DOMAIN=</a></li>
                        <li>
                            Visit <a href="http://traceroute.org" target="new">traceroute.org</a> for a list of traceroute servers around the world. But...
                            <ul>
                                <li>Servers come and go, so many of the links on that page are obsolete.  Don't get discouraged; just try another one.</li>
                                <li>Don't use the ones in China, which my browser rejects as malware sites.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <div class="takeNote">
            <p><strong>Another big idea: Redundancy</strong></p>
            <p>
            	Here's a traceroute result I got from Iceland:
	            <pre>
traceroute to 108.26.181.226 (108.26.181.226), 64 hops max, 52 byte packets
1  ndn-gw1-ge2-0-0 (130.208.16.13)  0.180 ms  0.139 ms  0.152 ms
2  is-rey.nordu.net (109.105.102.1)  0.207 ms  0.179 ms  0.183 ms
3  is-rey2.nordu.net (109.105.97.38)  0.201 ms  0.209 ms  0.216 ms
4  dk-uni.nordu.net (109.105.97.34)  30.376 ms  30.368 ms  30.519 ms
5  dk-ore.nordu.net (109.105.97.132)  30.789 ms  30.767 ms  30.788 ms
6  kbn-b4-link.telia.net (62.115.11.77)  30.789 ms  30.775 ms  30.783 ms
7  kbn-bb4-link.telia.net (213.155.135.174)  33.690 ms
kbn-bb3-link.telia.net (62.115.142.212)  31.028 ms
kbn-bb3-link.telia.net (62.115.142.214)  31.047 ms
8  nyk-bb2-link.telia.net (80.91.247.121)  131.444 ms
nyk-bb1-link.telia.net (80.91.249.24)  116.514 ms
nyk-bb2-link.telia.net (80.91.254.91)  121.490 ms
9  nyk-b2-link.telia.net (62.115.112.107)  116.541 ms
nyk-b2-link.telia.net (213.155.130.28)  124.699 ms
nyk-b2-link.telia.net (213.155.130.30)  129.637 ms
10  xe-3-3-3.GW10.EWR6.ALTER.NET (157.130.91.85)  131.354 ms  131.551 ms  125.289 ms
11  xe-8-1-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.171.71)  132.599 ms
xe-7-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.117)  126.318 ms
xe-7-1-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.171.69)  135.155 ms
12  * * *
				</pre>
			</p>
        Notice that hops 7, 8, 9, and 11 show three different results.  Traceroute generally tries three times (this is one of the reasons it takes so long for traceroute servers to respond) and show you three response times in milliseconds for each hop.  Sometimes the three tries end up going through different routes.  In this case, the differences are minor; all those routers are probably located in the same room.  But occasionally there's a power failure somewhere along the way, and then you  might see dramatically different ways a message can travel from there to here.
        </div>
        
        <div class="endnote">
            Network people have their own vocabulary.  On the AP exam you may see
            <ul>
                <li>
                    The <strong>end-to-end principle</strong> is abstraction, in the particular case of the Internet hierarchy.  It says that routers don't have to know anything about the meaning or purpose of the messages you send over the net; all they care about is the IP address at the beginning of the message.  Your computer and the server to which you sent the message are the only ones that have to think about what it means.
                    As a result, when someone invents a new application for the Internet, all the routers in the world don't have to be replaced or reprogrammed &mdash; to them it's all just bits.
                </li>
                <li><strong>Robustness</strong> is the technical name for the redundancy of paths through the Internet,  It means that if part of the net fails, the rest of the net remains connected even if the failed part is in the usual path from one place to another.</li>
                <li>Robustness and the end-to-end principle improve Internet <strong>scalability</strong>, which is the ability of the net to keep working as the size of the network and the amount of traffic over the network increase. (The page <a href="http://royal.pingdom.com/2013/01/16/internet-2012-in-numbers/" target="new">Internet 2012 in numbers</a> has some astonishing numbers about Internet traffic from a few years ago.)</li>
                <li>A <strong>packet</strong> is a small message.  Typically, if you want to send a <em>large</em> message, your computer divides it into small chunks that it sends individually.  This is important because if a router that's handling a chunk of your message fails, only that chunk has to be resent, rather than the entire message.  The Internet is a <strong>packet switching</strong> network.  (By contrast, landline telephone systems establish a long-term connection from one telephone to another, for as long as the phone call continues.)</li>
                <li>Another name for a packet switching network is a <strong>store-and-forward</strong> network, because each router along the way stores your packet long enough to forward it to the next router.</li>
                <li>
                    There are a <em>lot</em> of protocols! Here's a picture from Wikipedia:<br />
                    <img src="/bjc-r/img/4-internet/IP-suite.png" width="424" height="506" alt="The Internet protocol suite"><br />
                    You don't have to know about all of these, but you should know the official names for the four levels of abstraction (<strong>layers</strong>) in the Internet hierarchy.
                </li>
                <li>These are all <strong>open standards</strong>, which means that anyone can look up their details and build them into new hardware and software without getting permission.  (For example, here is <a href="https://tools.ietf.org/html/rfc791" target="new">the IPv4 specification</a>, but don't read it now.) Before the Internet, there were several different network protocols that were secrets belonging to particular manufacturers. So if you had a particular brand of computer or router, it could talk only to other computers of the same brand. Open protocols are another reason why the Internet is scalable.</li>
            </ul>
        </div>
        
        
        <div class="takeNote">
            <p><strong>What's with the three decimal points in IP addresses?</strong> They're not really decimal points; the four numbers that they separate are eight-bit <strong>bytes</strong> with values between 0 and 255.  There are four of them in an IP address because at the time the Internet Protocol was designed, most computers had four-byte (32-bit) arithmetic and storage units.  The 32-bit address is divided into bytes because addresses are assigned in hierarchical groups in groups of 2<sup>8</sup>, 2<sup>16</sup>, or 2<sup>24</sup>.  For example, the 2<sup>16</sup> IP addresses 128.32.<em>anything</em>.<em>anything</em> are assigned to the University of California, Berkeley, and are located in the Electrical Engineering and Computer Science Department.  The computer on my desk at Berkeley is 128.32.153.200.  Berkeley also has other address ranges assigned; the server for berkeley.edu is at 169.229.216.200 and the entire address range 169.229.<em>anything</em>.<em>anything</em> belongs to Berkeley.  Groups that made their reservations early have bigger blocks of addresses; for example, all of 18.<em>anything</em>.<em>anything</em>.<em>anything</em> belongs to MIT.</p>
            <p>A 32-bit IP address is big enough to support 2<sup>32</sup> computers, which is about four billion.  There are more than seven billion people on Earth, so there aren't enough addresses to go around.  (Not everyone has a computer, yet, but some people have more than one, and some computers don't belong to individuals.)  People have invented clever short-term solutions that allow, for example, every computer on a local network to share the same IP address; see the Take It Further at the end of this page.</p>
            <p>The long-term solution is to increase the size of an IP address. Most computers today use 64-bit numbers, so that would be a natural address size to use, but the Internet designers decided they didn't want their grandchildren to have to redesign IP again, so the new IP addresses are 128 bits wide.  2<sup>128</sup> is about 10<sup>38</sup>. By contrast, there are about 10<sup>50</sup> atoms in the Earth, and an estimated 10<sup>29</sup> stars in the observable universe. So we're probably okay even when the Internet is extended to include space aliens, but another IP revision might be needed when every atom has its own Internet connection!</p>
            <div class="takeItFurther"> Discuss: Will people ever be able to build a computer inside a single atom?</div>
            <p>The 32-bit version of IP is called <strong>IP version 4 (IPv4)</strong>, and the 128-bit version is <strong>IPv6</strong>. A great example of the importance of abstraction is that different protocols can be used at each of the four levels of the Internet abstraction hierarchy, and both IPv4 and IPv6 are in use today.  Most traffic still uses IPv4, because in order to make an IPv6 connection, all the routers along the way must recognize IPv6.  Old routers are replaced all the time anyway, because newer ones are faster, so eventually every router on the Internet will use IPv6. The switch from IPv4 to IPv6 is just one example of the fact that protocols in the Internet hierarchy are changing all the time.</p>
        </div>
        
        
        <div class="takeItFurther">
            <ul>
                <li>A more detailed explanation of the Internet protocol hierarchy is in <a href="/bjc-r/cur/programming/4-internet/1-web-data-communication-protocols/B2B-Appendix.pdf" target="new">the Appendix</a> to <em>Blown to Bits</em>.</li>
                <li>We did say this was a simplified picture, so it wasn't exactly a lie when we said a web search would reveal your computer's Internet address. &#x263a; Most likely, the router in your home or school uses <strong>Network Address Translation (NAT)</strong>, a protocol that allows all the computers on a local network to share one IP address, as seen from outside the network. The router that creates the local network gives each computer a <em>local address</em>. For example, although the outside world thinks the computer at which I'm typing this has IP address 108.26.181.226, my computer itself thinks its address is 192.168.1.11. The 192.168 <strong>domain</strong> (a range of IP addresses) is reserved for local networks; no computer on the Internet "really" has an address in that range.  As a result of NAT and other complications added to solve efficiency or security problems, the job of the router is not really as simple as the end-to-end principle ideally suggests.</li>
            </ul>
        </div>
        
        
    </body>
</html>
