<!DOCTYPE html>
<html>
    <head>
        <script src="/bjc-r/llab/loader.js"></script>
        <title>Unit 4, Lab 1: Reading Web Pages</title>
    </head>
<body>
<h2>IP Routing</h2>
<div class="forYouToDo" id="first">
<p>If you don't already have it open, load your project U4L1-web from the previous activity.</p>
    <ol>
    <div class="sidenote"><strong>What's DuckDuckGo?</strong>  It's a search engine, like Google or Bing, except that it doesn't track your searches to sell you to advertisers as the others do.</div>
    <li>Every computer (including smartphones, internet-enabled appliances, etc.) on the Internet has an address, analogous to your house's mailing address, called its <strong>IP address</strong>. (&quot;IP&quot; stands for <strong>Internet Protocol</strong>, which you'll learn more about later.) You can find out your computer's IP address by asking a search engine:<br />
      <a href="https://duckduckgo.com/?q=my+ip+address" target="new">https://duckduckgo.com/?q=my+ip+address</a><br />
      Write a Snap<em>!</em> reporter 
    
<img src="/bjc-r/img/4-internet/my-ip-addr.png" alt="my IP address"> in the Sensing palette that scrapes your IP address from the above link.  (If you're lucky, it'll come right after the phrase &quot;Your IP address is,&quot; but if you're unlucky there will be HTML tags to strip out. Use the View Source command to find out.) Remember to use <img src="/bjc-r/img/4-internet/proxied-http.png" alt="proxied http">.</li>  
    <li><strong>Discuss:</strong>  How does DuckDuckGo know your IP address?  Why do web sites <em>need</em> to know your IP address?</li></ol></div>
    <div class="takeNote">The Internet is probably the largest and most complicated artifact in human history.  It is a monument to two big ideas:<ul>
<li><strong>Cooperation.</strong> Just think: You can send email to someone in a country that's considered an enemy of your country (from the US to Iran, for example).  An engineer at Microsoft can read a web page at Apple.  Your T-Mobile cell phone can talk to your friend's Verizon phone.  Despite some governments' attempts to censor the net, the big picture is one of strong cooperative spirit.</li>
    <li><strong>Abstraction.</strong> There are billions of devices connected to the Internet, and hundreds of <em>kinds</em> of devices: laptops, tablets, phones, refrigerators, handheld credit card readers that the waiter brings to your table at the restaurant, and so on.  How do they all know how to talk to each other?  The Internet was designed with several levels of abstraction.  Here's an only slightly simplified picture:<br />
  <center><table border="2" cellpadding="6" summary="hardware, device driver software, Internet Protocol, Transmission Control Protocol, application protocols.">
        <caption>
          <center>Internet abstraction hierarchy</center>
        </caption>
        <tr>
          <td>&nbsp;&nbsp;application protocols</td>
        </tr>
        <tr>
          <td>&nbsp;&nbsp;Transmission Control Protocol (TCP)&nbsp;&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;&nbsp;Internet Protocol (IP)</td>
        </tr>
        <tr>
          <td>&nbsp;&nbsp;network interface hardware</td>
        </tr>
      </table></center>
            <div class="sidenote">In some parts of the country the word "route" is pronounced like "root"; in other parts it's pronounced to rhyme with "doubt."  Nevertheless, engineers everywhere pronounce "router" like "doubter."</div><br />
 <p>     Read this table from the bottom (least abstract) to the top (most abstract).  We won't have much to say about the bottom  level.  Your computer connects to the net through some kind of interface.  If it's a big desktop computer, it might have an Ethernet interface attached to a socket on the side or back of the computer, looking like a telephone jack but wider.  A laptop computer might have an Ethernet adaptor, but more likely has a WiFi interface attached to an antenna inside the case, connecting to your network <em>router</em> box by radio.  Your cell phone uses a longer-range <em>cellular</em> connetion to your phone carrier.</p>
 <div class="comment">Figure out how to do arp -a from inside Snap<em>!</em> to show who's on your local net, without having to install software or get root.</div>
 <p>Your network interface connects you to a small <em>local network</em>.  If your connection is by Ethernet (physical cable), the local network is all the machines that are cabled together, typically all in one or two rooms.  If the computers in your lab are permanently installed, the odds are they're on an Ethernet.  If you're on a laptop, your local network consists of all the machines with WiFi connections to the same router, also typically very near each other.</p>
 <p>Somewhere on your local network is a device that's <em>also</em> connected to <em>another</em> network.  That other network isn't "the Internet"; it's a somewhat larger network, but still pretty small.  Maybe there's one such network for your entire school.  The <strong>routers</strong> are the machines that are connected to two or more networks, your local one and some wider area ones.  It's a "router" because its job is to route incoming messages to the particular local computer to which each message is addressed.  It also knows how to forward outgoing messages to the best available larger network.</p>
<p>So, does your message finally get onto a super-huge network called "the Internet"?  No; all of the networks together, even the local net in your house, make up the Internet.  It's called "Internet" because it's a <em>network of networks</em>.</p>
<p>The network hardware interface attached to your computer only knows how to send messages to other computers on your local network.  When you ask for a web site on the other side of the world, as far as the hardware is concerned, you're just sending your request to your local router.  The router has to forward your message to <em>its</em> router, and so on, until you reach a router that's on several large networks and has to figure out which one is best for the next step in getting your request to its final destination.  The rules by which routers know how to do that are the <strong>Internet Protocol.</strong>  It's the abstraction that lets you imagine you're on a single huge network with all of the other computers in the world.</p></li></ul></div>
<div class="forYouToDo"><ol start="3">
<li>Click the link for <a href="http://www.usc.edu/cgi-bin/traceroute?choice=yes" target="new">http://www.usc.edu/cgi-bin/traceroute?choice=yes</a>.  What you see is a list of how a message gets to your computer from the University of Southern California (USC).  Here's an example, showing the route to the computer in Massachusetts on which I'm writing this:
<pre>
traceroute to 108.26.181.226 (108.26.181.226), 30 hops max, 40 byte packets
 3  rtr30-rtr33-fw26-fw27-gw-30.mgmt.usc.edu (10.1.133.2)  4.006 ms  1.732 ms *
 4  v255-gw-6 (128.125.251.149)  3.336 ms  8.617 ms  1.714 ms
 5  fw6-rtr6 (128.125.255.147)  1.054 ms  1.137 ms  1.286 ms
 6  rtr-border-cal-fw6 (128.125.251.226)  2.146 ms  1.802 ms  2.158 ms
 7  ln-usc1-pwaveusc2042.ln.net (130.152.182.81)  1.705 ms  1.593 ms  2.007 ms
 8  d3-0-1-2.a05.nycmny01.us.ra.gin.ntt.net (165.254.21.241)  2.878 ms  2.322 ms  2.374 ms
 9  ae-0.verizonbusiness.lsanca03.us.bb.gin.ntt.net (129.250.8.86)  1.700 ms  2.878 ms  1.913 ms
10  xe-8-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.119)  77.289 ms xe-7-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.117)  75.497 ms xe-8-0-2-0.BSTNMA-VFTTP-301.verizon-gni.net (130.81.191.119)  77.045 ms
11  * * *
12  * * *
13  *
</pre>
The lines numbered 3-6 are routers (notice "rtr" in most of their names) belonging to USC.  Line 7 is interesting; it is registered to an organization named "Los Nettos" (that's the "ln" in its name), but its official representative has a USC email address.
<div class="takeItFurther"> How do I know that?  Do a web search for "whois" to find out.</div>
<p>Line 8 is also interesting.  Its name ends with "ntt.net," which means that it belongs to NTT Communications in Tokyo, Japan!  But that doesn't mean our message went through Japan; this specific router is located in Englewood, Colorado.</p>
<div class="takeItFurther"> How do I know that?  Do a web search for "geolocation" to find out.</div>
<p>Line 9 is another ntt.net router, but this one is in Los Angeles.  My message has gone from California to Colorado and then back to California!  (Note that the router's name includes "lsanca"&mdash;Los Angeles, California.</p>
<p>On line 10, the message passes from NTT to Verizon, my Internet Service Provider.  I'm not sure where the router is actually located; one geolocation service tells me it's in Los Angeles, but another says it's in Missouri.</p>
<p>After that, the asterisks on lines 11-13 mean that the routers aren't responding to traceroute messages, so we don't know the exact path once the message is inside the Verizon network.</p></li>
<li>Try <a href="http://www.slac.stanford.edu/cgi-bin/nph-traceroute.pl?choice=yes" target="new">http://www.slac.stanford.edu/cgi-bin/nph-traceroute.pl?choice=yes</a>, which is a traceroute server at Stanford University, also in California.  See what you can deduce about that route; at what point does it start looking like the route from USC?</li>
<li>Here are some more to try:<ul><li><a href="http://www.giganews.com/line_info.html" target="new">http://www.giganews.com/line_info.html</a>.</li>
<li><a href="http://vger.kernel.org/cgi-bin/nph-traceroute?ASQ=on&OWN=on&MODE=ICMP&DOMAIN=" target="new">http://vger.kernel.org/cgi-bin/nph-traceroute?ASQ=on&amp;OWN=on&amp;MODE=ICMP&amp;DOMAIN=</a><li>

</body>
</html>
