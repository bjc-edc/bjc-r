<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 4 Lab 3: Network Protocols, Page 2</title>
    </head>
    <body>
        <h2>Reliable Transmission on Unreliable Networks: TCP</h2>
		<div class="todo">
        	Here are the EKs I expect will be covered on this page. Please mark with <em>italics</em> those that have definitely been covered and mark with <strong>bold</strong> those that will definitely not be covered here. Thanks, Mary
            <ul>
                <li><strong>EK6.1.1B</strong> An end-to-end architectures facilitates connecting new devices and networks on the Internet.</li> 
                <li><strong>EK6.2.1A</strong> The Internet and the systems built on it are hierarchical and redundant.</li>
                <li><strong>EK6.2.1D</strong> Routing on the Internet is fault tolerant and redundant.</li>
                <li><strong>EK6.2.2A</strong> Hierarchy and redundancy help systems scale.</li>
                <li><strong>EK6.2.2B</strong> The redundancy of routing (i.e., more than one way to route data) between two points on the Internet increases the reliability of the Internet and helps it scale to more devices and more people.</li>
                <li><strong>EK6.2.2F</strong> The Internet is a packet-switched system through which digital data is sent by breaking the data into blocks of bits called packets, which contain both the data being transmitted and control information for routing the data.</li>
                <li><strong>EK6.2.2G</strong> Standards for packets and routing include transmission control protocol/Internet protocol (TCP/IP).</li>
                <li><strong>EK6.2.2I</strong> The size and speed of systems affect their use.</li>
                <li><strong>EK6.2.2J</strong> The bandwidth of a system is a measure of bit rate â€“ the amount of data (measured in bits) that can be sent in a fixed amount of time.</li>
                <li><strong>EK6.2.2K</strong> The latency of a system is the time elapsed between the transmission and the receipt of a request.</li>
            </ul>
        </div>
		<div class="todo">
            From BH:
            <ul>
            	<li>4.3.2  The code.org video doesn't make the point that not all application-level protocols use TCP.  Sometimes speed of delivery is more important than guaranteed correct delivery, and for that there's UDP.  (I think BtB does talk about this.)
                <ul><li>Moving to Who's in Charge? --MF</li></ul>
              </li>
                <li>I think the stuff about congestion control and the TCP handshake is in the framework, but I'm not sure.
                <ul><li>I haven't seen anything about it. --MF</li></ul>
              </li>
            </ul>
        </div>
        
		
        <div class="forYouToDo" id="first">
            <ol>
				<li>Read <a href="http://www.bitsbook.com/wp-content/uploads/2008/12/B2B_3.pdf#page=324" target="_blank"><em>Blown to Bits</em> pages 306-309</a>.</li>
                <li>
                    Watch this video from code.org:<br />
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/AYdF7b3nMto" frameborder="0" allowfullscreen class="indent"></iframe>
                </li>
            </ol>
        </div>
	
    	<p>Computers, servers, and routers are fairly reliable. But there are often several computers and cables or radio transmissions between you and the recipient of a data packet. So, every once in a while a IP packet will be lost. Devices on the Internet need to tollerate these faults. The <strong>Transmission Control Protocol</strong> (TCP) guarantees <em>reliable</em> transmission.</p>
		<div class="forYouToDo">
            <ol start="3">
                <li>
                    Watch this video from securitycatalyst.com:<br />
					<iframe width="420" height="315" src="https://www.youtube.com/embed/7_LPdttKXPc?start=47&end=271" frameborder="0" allowfullscreen class="indent"></iframe>
                </li>
            </ol>
        </div>
        
		<p>
            The TCP and IP <strong>end-to-end</strong> design of the Internet is an abstraction:
            <div class="sidenote">Abstraction is reducing complexity by focusing on core concepts.</div>
            <ol>
                <li>The computers (or servers) at the endpoints run the <strong>Transmission Control Protocol</strong> (TCP) that guarantees  <em>reliable</em> transmission.</li>
                <li>And the routers at every connection point  run the Internet Protocol (IP) that transmit the packets from one IP address to another even though sometimes a packet will be lost. </li>
            </ol>
        </p>
        
		<div class="forYouToDo">
    		<ol start="4">
                <li>
                    Load <a class="run" href="/bjc-r/prog/4-internet/TCP.xml#present">this project</a>. It provides a simulation of unreliable data transmission by Internet Protocol. You're going to write (a simplified) TCP to make the data packets arrive reliably.
                    <ul>
                        <li><strong>Click the green flag</strong> to initialize the <var>incoming transmission</var> variables before each experiment.</li>
                        <li><strong>Click either sprite</strong> to make it send a message to the other one.</li>
                        <li><strong>Press left arrow or right arrow</strong> to send the alphabet in either direction (helpful for testing).</li>
                	</ul>
                    <div class="comment">need new pic</div>
				  <div class="endnote">In this simulation, the complete message is a string of text that is divided into packets of one letter each. In reality, the packet length is not so strictly limited and messages are usually much longer.</div>
					<a class="run" href="/bjc-r/prog/4-internet/TCP.xml"><img src="/bjc-r/img/4-internet/TCP.png" alt="picture of TCP project stage"></a>
                </li>
    
                <div class="endnote">
                    <img class="imageRight" src="/bjc-r/img/4-internet/sprite-local.png" width="289" height="165" alt="for this sprite only button">
                    On the stage there are two watchers: "Alice incoming transmission" and "Bob incoming transmission."  But in the Variables palette there's only one variable: "incoming transmission."  These are actually two different <em>local variables</em>, one belongs to Alice and one belongs to Bob. (Local means not shared across sprites; global means shared across all sprites like we've been doing most of the course.) To make a local variable, click the "for this sprite only" button when creating a variable.
                </div>

                <li>Click on one of the characters, and enter a message that it should send to the other.</li>
                
                <li>
                    <img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
                    Compare the result with what you sent. What problems do you see?
                </li>
                <li>
                    Compare notes with another pair. 
                    <img class="inline" src="/bjc-r/img/icons/talk-with-another-pair-mini.png" alt="Talk with Another Pair" title="Talk with Another Pair" />
                    Brainstorm what you could do to get around network unreliability.
 				</li>
			</ol>
    	</div>
        
	
<div class="todo">Move to Who's In Charge? and address the whole system and collaboration/copperation, open protocols, net neltrality, etc.
		<p>TCP is not the only "transport layer" protocol.  Another common one is <strong>UDP</strong> (User Datagram Protocol). UDP allows for human-unnoticeable delays and is used for stock trading and online gaming, but it does not try to guarantee reliable delivery.</p>

        <p>The top level of the protocol hierarchy is the <strong>application protocol</strong>. There are lots of these, one for each computer application. You're familiar by now with<strong> HTTP</strong>, the HyperText Transfer Protocol used by Web browsers. Others are <strong>FTP</strong>, the File Transfer Protocol used for sending files between computers, and <strong>IMAP</strong>, the Internet Message Access Protocol, by which the email program on your computer or phone gets your email from whatever server hosts your email account, such as gmail.com or yandex.com.</p>
</div>


		<div class="takeItFurther">      
            <img class="imageRight" src="/bjc-r/img/icons/tough-stuff.png" alt="Tough Stuff" title="Tough Stuff" />
            <p>
                Build a simple TCP. Resolve the unreliablity so that messages are received reliably despite the limitations of IP packets. Here's what you'll need to change:
				<ul>
                    <div class="comment">need to change pic</div>
                    <li>The definition of <img src="/bjc-r/img/4-internet/transmit.png" alt="transmit (message) to (sprite)"></li>
                    <li>The script for each sprite that starts with <img src="/bjc-r/img/4-internet/when-get-any.png" alt="when I receive (any message)"></li>
                </ul>
			</p>
	        <div class="takeNote">Note: because this is a simulation, you could always "solve" the problem by rewriting the program to simulate a perfect network instead of an imperfect one, but that's against the rules of this game. <strong>You may not change the definition of <img src="/bjc-r/img/4-internet/send-IP.png" alt="send IP packet () to (sprite)">.</strong></div>
        
            <ol type="A">
                <div class="sidenoteBig">How can you keep track of the order of your data?</div>
                <li>First, solve the problem of packets arriving out of order.  That is, make it possible for the receiver to rearrange the packets into the intended order.  This will require cooperation by both sender and receiver.</li>
		        <div class="endnote">A packet can include any kind of data: text, numbers, or lists. <em>You may include extra information in a packet in addition to the one text character.</em></div>
                <li>Then, solve the problem of packets not arriving at all. That is, make the transmission reliable even though IP is unreliable. This, too, will require changing both sender and receiver.  </li>
                <div class="endnote">For the sake of the simulation, you can't do this by eliminating the unreliability of <code>send IP packet</code>. <em>The sender will have to send a special end-of-transmission packet so that the receiver knows when to stop worrying about missing packets.</em></div>
            </ol>
        </div>
        
<div class="todo">Below is the remaining original content from Brian. --MF<hr />
        
  <p>
        	The last page was about the bottom two levels of the Internet protocol suite:
            <center>
                <table border="2" cellpadding="6" summary="hardware, Internet Protocol, Transmission Control Protocol, application protocols.">
                    <caption><center>Internet abstraction hierarchy</center></caption>
                    <tr>
                        <td>&nbsp;&nbsp;application protocols</td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;Transmission Control Protocol (TCP)&nbsp;&nbsp;</td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;<span class="green">&#x2714;</span> Internet Protocol (IP)</td>
                    </tr>
                    <tr>
                        <td>&nbsp;&nbsp;<span class="green">&#x2714;</span> network interface hardware</td>
                    </tr>
                </table>
            </center>
		</p>
        
        <div class="takeNote">
            <p>Earlier networks tried to provide reliability with programs running in their equivalent of routers. But it's time-consuming to deliver a transmission with complete reliability, and not every packet has to be delivered reliably. For example, your computer includes a clock, essentially just like the one next to your bed. And, like your bedside clock, the one in your computer doesn't keep perfect time. Eventually it will get noticeably fast or slow (and a computer can "notice" quite small errors). So every so often your computer sends a request to a <strong>time server</strong>, a computer with a very accurate clock that can reset your computer's clock to the correct value. But if one of those time requests is lost, it doesn't really matter; your computer will send another request pretty soon anyway.</p>
        </div>
        
        <div class="takeNote">
            <p>This simulation correctly represents the central issue about TCP, namely that it's possible, but complicated, to achieve reliable transmission as a layer of abstraction based on an unreliable underlying network.  But it omits many details.  Here are some examples:</p>
            <ul>
                <li>TCP simulates a <em>persistent</em> connection, as if the two endpoint computers were connected directly with wires, even though the real Internet uses packet switching.</li>
                <li>A computer can have several different TCP connections at once, and TCP has to direct each incoming packet to the correct (simulated) connection.  It does this by including in each packet header a <strong>port</strong> number that's different for each connection.  In setting up a TCP connection, the two endpoint computers start with an elaborate <strong>handshake</strong>, an interchange of messages including the assigned port numbers.</li>
                <li>In our simulation, a packet either arrives correctly or doesn't arrive at all, but on the real Internet it's possible for a packet to arrive with erroneous data, so the real TCP has to check for that and request retransmission of packets with internal errors.</li>
                <li>The earliest version of TCP turned out to be prone to network <strong>congestion</strong>, meaning that too many packets went back and forth in a short time for the network links to handle.  Therefore, modern TCP includes <strong>congestion control</strong> features to limit the rate at which packets are sent.</li>
            </ul>
        </div>
</div>

    
</body>
</html>
