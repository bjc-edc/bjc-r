<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 4 Lab 3: Website Data, Page 3</title>
	</head>

	<body>
        <img class="imageRight" src="/bjc-r/img/icons/teachers-choice.png" alt="Teacher's Choice" title="Teacher's Choice" />
        <h2>Web Scraping Techniques (Teacher's Choice)</h2>
        <div class="forYouToDo" id="first">
			<ol>
				<li>If you don't have it open, load <a class="run" href="/bjc-r/prog/4-internet/U4L3-HttpBlock.xml"> U4L3-HttpBlock project</a>, and try the <code>http</code> block with a <em>different</em> URL. It likely won't work, but try it, and keep reading.</li>
			</ol>
		</div>
        <p>
            <img class="imageRight" src="/bjc-r/img/4-internet/empty-result.png" alt="http block reporting ()" title="http block reporting ()" />
            You likely got an <em>empty</em> result back. For security, websites (such as the Snap<em>!</em> server) don't generally send a request to another site. The <code>http</code> block is a JavaScript hack ...Fortunately for us, it's not a very solid attempt at security...<br />
        </p>
        
        
        <h3>Using <code>proxied http</code> to Access Websites</h3>
        <div class="forYouToDo">
            <ol start="2">
                <li>Try the <img src="/bjc-r/img/4-internet/proxied-http.png" alt="proxied http://"> block with your URL. (Hint: this time, it <em>should</em> work. Be sure <em>not</em> to include the "http://" in the input slot.) </li>
                <div class="endnote">
					<p>The <code>proxied http</code> block fools the requested web site into sending data it wouldn't normally send. Most websites receive a request coming from Snap<em>!</em> and say "this isn't a real web browser query, so I'm not answering." The <code>proxied http</code> block uses proxy (replacement or stand-in) servers to call the URL you enter. The proxy server performs the request as a browser would and sends the information to Snap<em>!</em>.</p>
                </div>
            </ol>
        </div>
        
        <div class="takeNote">
        	<h4><strong>What if <code>proxied http</code> doen't work?</strong></h4>
        	If <code>proxied http</code> doesn't work, you can skip the remaining pages in this lab. You might find them interesting to read, but will not be able to do the projects.
        </div>
		
        <div class="endnote">If your network has certain security settings (like a <a href="https://en.wikipedia.org/wiki/Firewall_(computing)" target="_blank">firewall</a>), then you may not be able to use the <code>proxied http</code> block to access website data, which is required for the remainder of the lab. If you have access to the Internet somewhere that this block works, you use Snap<em>!</em> for webscraping such as building a <a href="http://localhost/bjc-r/cur/programming/4-internet/3-web-data/4-weather-app.html?topic=nyc_bjc%2F4-internet.topic&course=bjc4nyc.html&novideo&noassignment">Weather App</a>.</div>
        
        <p>The <code>proxied http</code> block will allow you to program Snap<em>!</em> to access websites as part of your projects. After accessing a site, you'll need to isolate the specific information you want from the HTML. Extracting the information out of the formatting is called <strong>scraping</strong> the web page.</p>
        
        
        <h3>Using String Reporters to Manage Data</h3>
        <p>Like the <a href="http://localhost/bjc-r/cur/programming/4-internet/3-web-data/2-read-web.html?topic=nyc_bjc%2F4-internet.topic&course=bjc4nyc.html&novideo&noassignment">two custom <code>substring</code> blocks</a>, which you can use to extract specific information from a webpage, you can also use <code>split</code> to manage the complexity of data returned from a web query. Use <code>split</code> to break up a long string of text into a list of smaller strings according to some marker (spaces, tabs, commas, new lines, etc.).</p>


        <div class="forYouToDo">
            <ol start="3">
                <li>
                	Try the <img src="/bjc-r/img/4-internet/proxied-http.png" alt="proxied http://"> block with this URL:<br />
                    <p class="center"><a href="http://www.weatherstreet.com/weather-forecast/New-York-NY-10001.htm" target="_blank">www.weatherstreet.com/weather-forecast/New-York-NY-10001.htm</a></p>	
                </li>
				<li>
                	Use <img class="inline" src="/bjc-r/img/4-internet/split-by-line.png" alt="split () by (line)" title="split () by (line)" /> to create a list of the lines of HTML code from that page.
                    </li>
                    <li>Write a script that reports a list of the lines of HTML starting from "&lt;body". The report of your script should look like this:<br />
                	<img class="indent" src="/bjc-r/img/4-internet/weather-list.png" alt="" title="" />
                </li>
                <li>
                	<img class="inline" src="/bjc-r/img/icons/save-mini.png" alt="Save Your Work" title="Save Your Work" /> In Lab 5, you will search through this list for the line with the data that you need and clean out all the HTML formatting that you don't need so that you can make a weather app:<br />
                	<img class="indent" src="/bjc-r/img/4-internet/current-temp-34.png" alt="current temperature in (New York) reporting 34" title="current temperature in (New York) reporting 34" />
                </li>
                <!--<li>Now, open <a href="http://www.weatherstreet.com/weather-forecast/New-York-NY-10001.htm" target="_blank">http://www.weatherstreet.com/weather-forecast/New-York-NY-10001.htm</a> in a separate browser window or tab, and use your browser to <a href="http://www.computerhope.com/issues/ch000746.htm" target="_blank">view the source</a> (HTML) for that page.</li>
                <li>Locate the one line in the HTML that describes the temperature...</li>-->
            </ol>
        </div>
        
        <h3>Reading Data Using URL Tags</h3>
        <div class="sidenote">Remember, a <strong>URL</strong> (Uniform Resource Locator) is a reference to an Internet resource such as a Web page.</div>
        <p>Many websites communicate information in the details in their URLs.</p>
        
        <div class="todo">use duckduckgo.com --MF &amp; BH</div>
       
        <div class="ifTime">
            <ol>
                <li>Starting from <a href="https://www.google.com" target="_blank">www.google.com</a>, type a one-word web search. What is the URL of your current web page?</li>
                <li>Change your URL to make Google search for a new topic.</li>
                <li>Experiment to figure out how Google handles multiple-word web searches in URLs.</li>
            </ol>
        </div>
        
        <div class="sidenote">When you see <code>https</code> instead of <code>http</code>, it means the information exchanged is secured via encryption.</div>
        
        <p>Your URL may add some details, but one of the simplest formats is <a href="https://www.google.com/#q=snap" target="_blank">https://www.google.com/#q=snap</a>.</p>
          
        <img src="/bjc-r/img/4-internet/snap-google.png" width="50%" align="middle" alt="SNAP search on Google">
                
        <div class="comment">
          <p>Can we search for something other than "snap"? It's weird to me that it goes to a food bank page... --MF</p>
          <p>We certainly <em>can</em>. Stuff like that is always a choice we can make (it isn't essential AP, CS, or pedagogy). I don't find it weird, and I  even see it as potential a positive value, but it is also a potential political hot-button that could interfere with our mission to the very same kids that the government SNAP program is designed to serve. I worry some about that, but the fact that a search turns up <em>many</em> things, though, makes this seem safe. And, speaking of weird, did you notice that one is from 55 Chapel Street, Newton?! </p>
		  <p>I don't have a requirement to use "snap" here, I just thought it was clever. Berkeley Snap shows up on that page, too, but it's not the top hit. -BK</p>
</div>
        
        <div class="ifTime">
            <ol start="4">
                <div class="sidenote">Remember that the results of <code>ask</code> are available from a reporter called <em>answer</em>. As before, use the <img src="/bjc-r/img/4-internet/proxied-http.png" alt="Proxied HTTP block"> block.</div>
								<li><a class="run" href="/bjc-r/prog/4-internet/U4L5-WebSearch.xml" target="_blank">Load this project</a>.
</li>
                <li>Build a small app that asks for a one-word search query, then displays the URL to use for that Google search, and the HTML of the results from the search. Warning: don't expect the HTML to be easy to read!</li>
                <li>Look inside <code>error reporting http</code>. How much of the Javascript (JS) can you read?</li>
                <div class="endnote">JS uses <code>!</code> for <img class="" src="/bjc-r/img/blocks/not.png" alt="empty not predicate" title="empty not predicate" /> and <code>=</code> for <img class="" src="/bjc-r/img/blocks/set.png" alt="empty set predicate" title="empty set predicate" />, but <code>if else</code> and <code>return</code> work the same as in Snap<em>!</em>.</div>
                
                the Javascript within the 
            </ol>
        </div>         
        
        <div class="takeItFurther">
            <ol type="A">
            	<li>Edit your work so that it works for multiple-word searches.</li>
            </ol>
        </div>
        
        
    </body>
</html>
