<!DOCTYPE html>
<html lang="en">
    <head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<script type="text/javascript" src="/bjc-r/llab/loader.js"></script>
		<title>Unit 5 Lab 1: Search Algorithms and Efficiency, Page 7</title>
    </head>

	
    <body>
		<h2>Parallelism</h2>
        <div class="learn">
            <p><strong>On this page,</strong> you will learn how running multiple scripts in parallel can reduce the total time it takes to run an algorithm.</p>
        </div>
        <p>In Snap<em>!</em>, you are accustomed to seeing a bunch of scripts that all run independently, which may or may not be associated with different sprites. This is kind of like <em>parallel computing</em>. So, if we had a different computer for each sprite, that would be true parallelism. As it is, there is only one computer, and it divides its attention among the processes by running a little bit of one and then running a little bit of the next one. Specifically, it switches at the bottom of loops (<code>forever</code>, <code>repeat</code>, etc.).</p>
        
        <div class="vocabFullWidth">: <strong>Sequential</strong> and <strong>Parallel Computing</strong>
            <div class="comment">CSN-2.A.1, CSN-2.A.2</div>
            <p>
                This section covers two computational models:
                <ul>
                    <li>In <strong>sequential computing</strong>, operations are performed in order one at a time.</li>
                    <li>In <strong>parallel computing</strong>, the program is broken into smaller steps, some of which are performed at the same time.</li>
                </ul>
            </p>
        </div>
        
        <div class="comment">CSN-2.B.1</div>
        <p>You can compare the efficiency of two different algorithmic solutions to a problem by comparing the time it takes them to perform the same task.</p>
        
        <div class="forYouToDo" id="first">
			<ol>
                <li>
                    <!-- Question 1 -->
                    <div class="assessment-data" type="multiplechoice" identifier="How long will this sequential script take to run?"
                        hasinlinefeedback="true" maxchoices="1" responseIdentifier="ri1" shuffle="true">
                        <div class="prompt">
                            <div class="comment">CSN-2.B, CSN-2.B.2</div>
                            How long will this  <em>sequential</em> program take to run?<br />
                            <img class="indent" src="/bjc-r/img/5-algorithms/quizlet-sequential.png" alt="wait (6), wait (4), wait (8)" title="wait (6), wait (4), wait (8)" />
                        </div>
                        <div class="choice" identifier="c1">
                            <div class="text">18</div>
                            <div class="feedback">Correct!</div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">8</div>
                            <div class="feedback">A sequential solution takes as long as the sum of the run times of all of its steps.</div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">4</div>
                            <div class="feedback">A sequential solution takes as long as the sum of the run times of all of its steps.</div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">6</div>
                            <div class="feedback">A sequential solution takes as long as the sum of the run times of all of its steps.</div>
                        </div>
                        <div class="responseDeclaration" identifier="ri1">
                            <div class="correctResponse" identifier="c1"></div>
                        </div>
                    </div>
                </li>
            </ol>
        </div>
    
        <div class="comment">CSN-2.B.2</div>
        <p>The run time of a sequential algorithm is the sum of the run times of all its steps.</p>
    
        <div class="forYouToDo">
			<ol start="2">
				<li>
                    <!-- Question 2 -->
                    <div class="assessment-data" type="multiplechoice" identifier="How long will this parallel script take to run?"
                        hasinlinefeedback="true" maxchoices="1" responseIdentifier="ri2" shuffle="true">
                        <div class="prompt">
                            <div class="comment">CSN-2.B, CSN-2.B.3</div>
                            How long will this <em>parallel</em> program take to run?<br />
                            <img class="indent" src="/bjc-r/img/5-algorithms/quizlet-parallel-1.png" alt="broadcast (go) and wait, wait (6) secs" title="broadcast (go) and wait, wait (6) secs" />
                            <img class="indent" src="/bjc-r/img/5-algorithms/quizlet-parallel-2.png" alt="when I receive (go): wait (4) secs" title="when I receive (go): wait (4) secs" />
                            <img class="indent" src="/bjc-r/img/5-algorithms/quizlet-parallel-3.png" alt="when I receive (go): wait (8) secs" title="when I receive (go): wait (8) secs" />
                        </div>
                        <div class="choice" identifier="c1">
                            <div class="text">18</div>
                            <div class="feedback">
                                The two <code>when I receive</code> tasks happen in parallel, not one after the other.
                            </div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text">8</div>
                            <div class="feedback">
                                The longest parallel time does matter, but it's not the only thing that contributes to the total time.
                            </div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text">6</div>
                            <div class="feedback">
                                <code>Broadcast and wait</code> waits until all the tasks that it started have finished.
                            </div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text">14</div>
                            <div class="feedback">
                                Correct!
                            </div>
                        </div>
                        <div class="responseDeclaration" identifier="ri2">
                            <div class="correctResponse" identifier="c4"></div>
                        </div>
                    </div>
                </li>
			</ol>
		</div>
    
        <div class="comment">CSN-2.C.1, CSN-2.C.2, CSN-2.C.4</div>
        <p>
            <img class="noshadow imageRight" src="/bjc-r/img/5-algorithms/sequential-parallel-parts.png" alt="diagram of algorithm for finding the average word length in list of 100,000 words: the first two steps (Divide up the wordlist, Send tasks to each other computer) are labeled 'sequential'; then arrows indicate branching off into multiple tasks (Count all the 'A' words, Count all the 'B' words, ..., Count all the 'Z' words) that are labeled 'parallel'; finally, arrows indicate rejoining these results back into a single thread of three steps (Add the 26 partial results, Divide that sum by the total number of words, Report that average) labeled 'sequential'" title="diagram of algorithm for finding the average word length in list of 100,000 words: the first two steps (Divide up the wordlist, Send tasks to each other computer) are labeled 'sequential'; then arrows indicate branching off into multiple tasks (Count all the 'A' words, Count all the 'B' words, ..., Count all the 'Z' words) that are labeled 'parallel'; finally, arrows indicate rejoining these results back into a single thread of three steps (Add the 26 partial results, Divide that sum by the total number of words, Report that average) labeled 'sequential'" />
            Writing a program that does nothing but wait is, of course, unrealistic, but what <em>is</em> realistic is that in most problems, there isn't a solution that's purely parallel. Some part of the computation has to be done sequentially. In the previous question, the sequential part is modeled by <code>wait 6 secs</code>. Parallelization with this silly example feels trivial, but imagine you work for Google. Millions of search queries and web page edits have happened today, and it's your job to have to process them. If they didn't have huge server farms with thousands of computers in each building, they couldn't keep up at all. Parallel computing lets you <em>scale</em> to very large problems.</p>
        <div class="comment">CSN-2.B.3</div>
        <p>As a more specific example, suppose you want to know the average word length in list of 100,000 words. You can divide the task among several computers (one for each starting letter). Each computer adds the lengths of all the words assigned to it (all the "A" words, all the "B" words, etc). Then one computer has to add the 26 partial results and divide by the total number of words to find the average. To calculate the run time of this parallel solution, you would add the run time of the longest parallel portion (the run time for the letter with the most words) to the run time of the sequential portion (adding the 26 partial results and dividing the sum by the total number of words).</p>
    
        
        <div class="forYouToDo" style="clear: right;">
            <p>Because every computation includes a sequential portion, there is a limit to how much you can speed up a task by adding <em>processors</em>.</p>
            <div class="vocab">
                <p>A <strong>processor</strong> is a piece of circuitry inside a computer that processes the instructions from computer programs.</p> 
                <p class="center"><img class="" src="/bjc-r/img/6-computers/Hardware_img/CPU_small.jpg" alt="CPU" title="CPU"/></p>
                <p><small>Image credit: Wikipedia user Solipsist</small></p>
            </div>
			<ol start="3">
                <div class="comment">CSN-2.A, CSN-2.B, CSN-2.B.1, CSN-2.C.5</div>
				<li>
                    Suppose a task includes one minute of sequential steps and a parallelizable portion that would take an hour if done sequentially.  Fill in this table:
                    <table class="bordered standard nowrap center" summary="Table of number of processors vs. total program running time">
                        <tr>
                            <th scope="col">Number of Processors</th>
                            <th scope="col">Total Time Required</th>
                            <th scope="col">Solution Type</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>61 minutes (1 hr + 1 min)</td>
                            <td>sequential solution</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>31 minutes (30 min + 1 min)</td>
                            <td rowspan="10">parallel solutions</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>20</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>30</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>60</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>120</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>240</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>480</td>
                            <td></td>
                        </tr>
                    </table>
                </li>
                <li>Consider the law of diminishing returns:
                    <ol>
                        <li>If you have one processor and you add one more, how much time do you save?</li>
                        <li>If you have 240 processors and you add 240 more, how much time do you save?</li>
                        <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> How many processors do you think are worth having for this problem?</li>
                    </ol>
                </li>
                <div class="endnote">
                    <a href="#hint-diminishing" data-toggle="collapse" title="What is the law of diminishing returns?">What is the law of diminishing returns?</a>
                    <div id="hint-diminishing" class="collapse">The law of diminishing returns is an idea from economics that basically says that after a certain point, more is not better. For example, if you got five birthday presents, you might be happier than if you got only one, but getting more presents isn't necessarily better. Imagine you received a hundred  presents. You'd get bored opening them and probably feel overwhelmed. And getting a thousand or a million presents wouldn't make your birthday any happier. The same rule applies to birthday cake!</div>
                </div>
			</ol>
		</div>
		
        <div class="vocabFullWidth">
            <div class="comment">CSN-2.B.4</div>
            <ul>
                <li>
                    Programmers refer to the <strong>speedup</strong> of parallel solution to describe how many times as fast the parallel solution is compared to the sequential solution:<br />
                <span class="katex indent">\text{speedup} = \frac{\text{sequential time}}{\text{parallel time}}</span>
                </li>
                <div class="comment">CSN-2.A.3</div>
                <li>Modern computers have multiple processors (2, 4, or 8) in a single computer, so you can do small-scale parallel processing on the machine on your desk. <strong>Distributed computing</strong> uses multiple computers (perhaps even spread out around the world).</li>
            </ul>
        </div>
    
        <p>Computer hardware is very reliable; it's rare for the hardware to break down while you're running a program. But in distributed computing with tens of thousands of computers working on the same problem, it's <em>likely</em> that one of them will fail. (If the probability of one computer failing during a program run is 0.0001, and you use 10,000 computers, then the probability of one of them failing is about 0.368&mdash;about a third of the time!) So software has to compensate by checking that the machines are running and reassigning the tasks of a failed computer to a working one.</p>
        <p>Also, when you are doing things in parallel, the parallel processes can interfere with each other.
            <div class="endnote">
                <a href="#hint-banking" data-toggle="collapse" title="An example of interfering processes with banking...">An example of interfering processes with banking...</a>
                <div id="hint-banking" class="collapse">
                    <p>
                        If one person withdraws money from an ATM at the same time as someone at a different ATM withdraws money from the same account, you could run into a situation like this:
                        <table class="bordered standard nowrap center" summary="Possible sequence of events when two ATM transactions happen in parallel">
                        <tr>
                            <td rowspan="9" style="vertical-align: middle; border-left: 0; border-top: 0; border-bottom: 0;"><img class="inline noshadow" src="/bjc-r/img/5-algorithms/time-arrow.png" alt="downward pointing arrow labeled 'time'" title="downward pointing arrow labeled 'time'" /></td>
                            <th scope="col">ATM 1</th>
                            <th scope="col">ATM 2</th>
                        </tr>
                        <tr>
                            <td>looks up the balance ($100)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>looks up the balance ($100)</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>checks if the amount requested ($40) is available</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>adjusts the balance ($60)</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>dispenses the money</td>
                        </tr>
                        <tr>
                            <td>check if the amount requested ($20) is available</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>adjusts the balance ($80)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>dispenses the money</td>
                            <td></td>
                        </tr>
                    </table>
                    </p>
                    <p>Because ATM 2 changed the account balance after ATM 1 looked up the balance, ATM 1 didn't know that the balance had been changed. The bank account ended up a balance of $80 even though it started at $100 and a total of $60 was withdrawn.</p>
                </div>
            </div>
        </p>
        <p>For these reasons and others, a parallel program is harder to write and debug than a sequential program.</p>

    
        <div class="forYouToDo">
			<ol start="5">
				<li>
                    <img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" />
                    Identify some benefits and potential challenges of parallel and distributed computing.
                    <img class="inline" src="/bjc-r/img/icons/write-out-thoughts.png" alt="Write Out Your Thoughts" title="Write Out Your Thoughts" />
                </li>
			</ol>
		</div>

        <div class="ifTime">
			<ol start="6">
				<li>
                    <!-- Question 3 -->
                    <div class="assessment-data" type="multiplechoice" identifier="What is the speedup for this parallel solution when compared to the sequential solution?"
                        hasinlinefeedback="true" maxchoices="1" responseIdentifier="ri3" shuffle="true">
                        <div class="prompt">
                            What is the <em>speedup</em> for this parallel solution when compared to the sequential solution?<br />
                            <ul>
                                <li>Sequential solution: <img class="inline" src="/bjc-r/img/5-algorithms/quizlet-sequential.png" alt="wait (6), wait (4), wait (8)" title="wait (6), wait (4), wait (8)" /></li>
                                <li>
                                    Parallel solution:
                                    <img class="inline" src="/bjc-r/img/5-algorithms/quizlet-parallel-1.png" alt="broadcast (go) and wait, wait (6) secs" title="broadcast (go) and wait, wait (6) secs" />
                                    <img class="inline" src="/bjc-r/img/5-algorithms/quizlet-parallel-2.png" alt="when I receive (go): wait (4) secs" title="when I receive (go): wait (4) secs" />
                                    <img class="inline" src="/bjc-r/img/5-algorithms/quizlet-parallel-3.png" alt="when I receive (go): wait (8) secs" title="when I receive (go): wait (8) secs" />
                                </li>
                            </ul>
                        </div>
                        <div class="choice" identifier="c1">
                            <div class="text"><span class="katex">\frac{18}{14}</span></div>
                            <div class="feedback">
                                Correct!
                            </div>
                        </div>
                        <div class="choice" identifier="c2">
                            <div class="text"><span class="katex">\frac{14}{18}</span></div>
                            <div class="feedback">
                                Speedup is calculated by dividing the sequential time by the parallel time.
                            </div>
                        </div>
                        <div class="choice" identifier="c3">
                            <div class="text"><span class="katex">\frac{18}{6}</span></div>
                            <div class="feedback">
                                <code>Broadcast and wait</code> waits until all the tasks that it started have finished.
                            </div>
                        </div>
                        <div class="choice" identifier="c4">
                            <div class="text"><span class="katex">\frac{18}{8}</span></div>
                            <div class="feedback">
                                The longest parallel time does matter, but it's not the only thing that contributes to the total parallel time.
                            </div>
                        </div>
                        <div class="responseDeclaration" identifier="ri3">
                            <div class="correctResponse" identifier="c1"></div>
                        </div>
                    </div>
                </li>
			</ol>
		</div>
    
        <div class="takeItFurther">
            <ol type="A">
                <li><a href="/bjc-r/prog/5-algorithms/U5L1-Split-Wordlist.xml" class="run"><img class="inline" src="/bjc-r/img/icons/load-save.png" alt="Click here to load this file. Then save it to your Snap! account." title="Click here to load this file. Then save it to your Snap! account."></a> You will find a variable <var>split wordlist</var> whose value is <em>a list of 26 lists</em>. The first list contains all the words starting with A; the second list contains all the words starting with B; and so on, ending with the twenty-sixth list, which contains all the words starting with Z.
                    <ol>
                        <li>The project also includes part of a program that will use sprite parallelism to find all the five-letter words in the <var>split wordlist</var>. It makes 25 clones and assigns to each clone the task of keeping all the five-letter words from its assigned sublist (the parent sprite performs the task for the 26th letter).  When all the clones have finished, the parent sprite appends the 26 result lists, in order, to get a single list of five-letter words. Complete the program.</li>
                        <li>Add code to compute the total amount of time required.</li>
                        <li>Create a sequential version of this project and time it.</li>
                        <li><img class="inline" src="/bjc-r/img/icons/talk-with-your-partner.png" alt="Talk with Your Partner" title="Talk with Your Partner" /> Were the timing results what you expected? Why do you think that happened?</li>
                    </ol>
                </li>
            </ol>
        </div>
        
        
    </body>
</html>